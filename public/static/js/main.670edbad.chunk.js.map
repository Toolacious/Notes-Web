{"version":3,"sources":["graphql/login.js","accessToken.js","routes/auth.js","icons/login.png","components/SignIn.js","graphql/mutations.js","icons/signup.jpg","components/SignUp.js","routes/authRoute.js","routes/protectRoute.js","components/Page_1_0/MenuItem.js","graphql/logout.js","graphql/upload.js","context/avatarContext.js","components/Page_1_0/UploadDialog.js","components/Page_1_0/AccountDialog.js","context/filetree.js","components/Page_1_0/NewDialog.js","icons/icon.png","icons/title.png","components/Page_1_0/Header.js","icons/avatar.png","components/Page_1_0/SaveDialog.js","components/Page_1_0/Markdown.js","graphql/updateNote.js","context/mainContext.js","components/Page_1_0/Main.js","graphql/notes.js","graphql/getAvatar.js","graphql/noti.js","components/Page_1_0/SearchBox.js","components/Page_1_0/RenameDialog.js","components/Page_1_0/DeleteDialog.js","components/Page_1_0/TreeMenuItem.js","components/Page_1_0/FolderTree.js","components/Page_1_0/LeftDrawer.js","components/Page_1_0/RightDrawer.js","graphql/addTag.js","graphql/delTag.js","components/Page_1_0/TagBar.js","graphql/createNote.js","graphql/deleteNote.js","components/Page_1_0/FileActions.js","routes/loading.js","components/Page_1_0/Page_1_0.js","routes/Routes.js","App.js","reportWebVitals.js","index.js"],"names":["LOGIN_Mutation","gql","accessToken","setAccessToken","s","getAccessToken","initialState","user","decodedToken","jwtDecode","AuthContext","createContext","login","userData","logout","authReducer","state","action","type","payload","AuthProvider","props","useReducer","dispatch","Provider","value","Copyright","Typography","variant","color","align","to","Date","getFullYear","useStyles","makeStyles","theme","root","height","image","backgroundImage","loginImg","backgroundRepeat","backgroundColor","palette","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","SignIn","context","useContext","classes","useMutation","loading","error","useState","loginErr","setloginErr","history","useHistory","validationSchema","Yup","email","required","password","min","formik","useFormik","initialValues","onSubmit","values","a","variables","response","data","push","console","log","message","slice","Grid","container","component","className","CssBaseline","item","xs","sm","md","Paper","elevation","square","Avatar","handleSubmit","noValidate","TextField","fullWidth","id","label","name","autoComplete","autoFocus","onChange","handleChange","touched","Boolean","errors","helperText","Button","disabled","isSubmitting","Box","mt","CREATE_USER_MUTATION","padding","borderRadius","space","SignUp","fname","max","lname","confirmPassword","oneOf","addUser","regiErr","setRegiErr","style","Container","maxWidth","justify","AuthRoute","Component","rest","render","ProtectRoute","menubarButton","fontSize","paddingTop","paddingBottom","paddingLeft","paddingRight","flexShrink","textTransform","menuItem","disabledMenuItem","cursor","SimpleMenu","menu","sections","React","anchorEl","setAnchorEl","aria-controls","aria-haspopup","onClick","event","currentTarget","onKeyDown","e","key","preventDefault","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","open","onClose","map","section","MenuItem","clsx","document","getElementById","func","LOGOUT_Mutation","UPLOAD_Mutation","AvatarContext","String","setAvatar","canvas","crop","upload","url","toDataURL","picture","dialogButtonWrapper","flexGrow","dialogButton","textAlign","dialog","input","UploadDialog","userId","upImg","setUpImg","imgRef","useRef","previewCanvasRef","aspect","setCrop","completedCrop","setCompletedCrop","onLoad","useCallback","img","current","useEffect","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","Dialog","aria-labelledby","DialogTitle","src","onImageLoaded","c","onComplete","circularCrop","maxHeight","overflow","ref","Math","round","DialogActions","accept","target","files","length","reader","FileReader","addEventListener","result","readAsDataURL","htmlFor","generateDownload","headerAvatar","marginLeft","marginRight","headerAvatarWrapper","justifyContent","avatarWrapper","marginBottom","SimpleDialog","onOpen","selectedValue","avatar_src","alt","AccountDialog","setOpen","uploadOpen","setUploadOpen","setSelectedValue","handleClickOpen","handleClose","filecontext","usernotes","openFiles","currentOpenFile","setcurrentOpenFile","setuserNotes","setopenFiles","actions","RenameDialog","title","setTitle","valid","setValid","helper","setHelper","handleCreate","findIndex","notes","new","closeFunc","DialogContent","handleTitle","val","headerWrapper","flexWrap","borderBottom","divider","zIndex","drawer","icon","mainWrapper","titlebar","border","titleImg","objectFit","menubar","minHeight","overflowX","Header","openNewDialog","setOpenNewDialog","file_menu","saveButton","click","Fragment","Toolbar","IconButton","SaveDialog","updFunc","Markdown","escapeHtml","plugins","gfm","singleTilde","RemarkMathPlugin","renderers","code","language","vscDarkPlus","children","math","inlineMath","_mapProps","UPDNOTE_Mutation","mainContext","mode","setMode","searchStr","setSearchStr","guide","pageBar","listStyle","overflowY","chip","borderRight","chipRoot","transform","hover","chipText","textOverflow","chipFocus","markdown","mainWindowWrapper","position","mainWindow","viewWindow","modeButtonWrapper","top","right","nopad","inputStyle","resize","outline","outputStyle","Main","updNote","useTheme","pageNum","setPageNum","pages","setPages","openDialog","setOpenDialog","dialogFunctions","setDialogFunctions","fileID","node","addPage","Object","assign","unsaved","find","handleDelete","chipToDelete","indexOf","save","deletePage","close","updPages","filter","index","handleMode","updMode","currentPageIndex","tags","regex","str","links","g","exec","lastIndex","forEach","match","groupIndex","newPages","Chip","size","disableRipple","getElementsByClassName","focus","onDelete","Divider","orientation","handleContentData","NOTES_QUERY","AVATAR_QUERY","GUIDE_QUERY","borderColor","text","primary","linksIOTitle","SearchBox","tagItem","setTagItem","titleItem","setTitleItem","mdItem","setMdItem","openTitle","setOpenTitle","openMd","setOpenMd","alltags","ele","titlefiles","mdfiles","includes","placeholder","List","disablePadding","obj","ListItem","button","ListItemText","handleRename","rename","DeleteDialog","delete","labelIcon","labelText","fontWeight","whiteSpace","TreeMenu","openRenameDialog","setOpenRenameDialog","openDeleteDialog","setOpenDeleteDialog","handleClick","onContextMenu","colorWhite1","FolderTree","renderTree","TreeItem","nodeId","Array","isArray","child","TreeView","defaultCollapseIcon","defaultExpanded","defaultExpandIcon","sidebarWrapper","rootShift","transition","transitions","create","easing","easeOut","duration","enteringScreen","drawerPaperWrapper","drawerPaper","bottom","PersistentDrawerLeft","graphMode","setGraph","aria-label","Drawer","anchor","docked","borderLeft","drawerButton","PersistentDrawerRight","r_open","setr_open","r_mode","setr_Mode","inlinks","setInLink","outlinks","setOutLink","openIn","setOpenIn","openOut","setOpenOut","inLinks","outLinks","tmp","keys","entries","setTag","setShowingItem","handleLink","tag","ADDTAG_Mutation","DELTAG_Mutation","alert","TagBar","anchorEle","setAnchorEle","setTimeout","undefined","addtag","deltag","chipData","setChipData","chips","newnotes","splice","newTag","body","Popover","Alert","severity","ADDNOTE_Mutation","DELNOTE_Mutation","actionReducer","updOpenFiles","updCurrentOpenFile","updData","idx","Example","mainGrid","pageContainer","Page_1_0","useQuery","ava_loading","ava_error","ava_data","userAvatar","guide_loading","guide_error","guide_data","setGuide","newNote","delNote","setUserNotes","createNote","newNotes","FileActions","disableGutters","flex","minWidth","Routes","exact","path","App","setLoading","fetch","method","credentials","then","res","json","decode","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","httpLink","createUploadLink","uri","requestLink","ApolloLink","operation","forward","Observable","observer","handle","Promise","resolve","setContext","headers","authorization","subscribe","next","bind","complete","catch","unsubscribe","RefreshLink","TokenRefreshLink","accessTokenField","isTokenValidOrUndefined","token","exp","now","fetchAccessToken","handleFetch","handleError","err","warn","errorLink","onError","graphQLErrors","networkError","errorMessage","client","ApolloClient","link","from","cache","InMemoryCache","restore","wrappedApp","ReactDOM"],"mappings":"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","file":"static/js/main.670edbad.chunk.js","sourcesContent":["import { gql } from \"apollo-boost\";\r\n\r\nexport const LOGIN_Mutation = gql`\r\n    mutation login($email: String!, $password: String!) {\r\n        login(data: { email: $email, password: $password }) {\r\n            userId\r\n            name\r\n            email\r\n            accessToken\r\n        }\r\n    }\r\n`;\r\n","let accessToken = \"\";\r\n\r\nexport const setAccessToken = (s) => {\r\n    accessToken = s;\r\n};\r\n\r\nexport const getAccessToken = () => {\r\n    return accessToken;\r\n};\r\n","import React, { useReducer, createContext } from \"react\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { getAccessToken } from \"../accessToken\";\r\n\r\nconst initialState = {\r\n    user: null,\r\n};\r\n\r\nif (getAccessToken()) {\r\n    const decodedToken = jwtDecode(getAccessToken());\r\n    initialState.user = decodedToken;\r\n}\r\n\r\nconst AuthContext = createContext({\r\n    user: null,\r\n    login: (userData) => {},\r\n    logout: () => {},\r\n});\r\n\r\nfunction authReducer(state, action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return {\r\n                ...state,\r\n                user: action.payload,\r\n            };\r\n        case \"LOGOUT\":\r\n            return {\r\n                ...state,\r\n                user: null,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction AuthProvider(props) {\r\n    const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n    function login(userData) {\r\n        //localStorage.setItem(\"jwtToken\", userData.token);\r\n        dispatch({\r\n            type: \"LOGIN\",\r\n            payload: userData,\r\n        });\r\n    }\r\n\r\n    function logout() {\r\n        //localStorage.removeItem(\"jwtToken\");\r\n        dispatch({ type: \"LOGOUT\" });\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{ user: state.user, login, logout }}\r\n            {...props}\r\n        />\r\n    );\r\n}\r\n\r\nexport { AuthContext, AuthProvider };\r\n","export default __webpack_public_path__ + \"static/media/login.bd291095.png\";","import React, { useState, useContext } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import Link from \"@material-ui/core/Link\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { LOGIN_Mutation } from \"../graphql/login\";\r\nimport { AuthContext } from \"../routes/auth\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport loginImg from \"../icons/login.png\";\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {\"Copyright © \"}\r\n            <Link color=\"inherit\" to=\"https://material-ui.com/\">\r\n                Abyss Notes\r\n            </Link>{\" \"}\r\n            {new Date().getFullYear()}\r\n            {\".\"}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: \"100vh\",\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${loginImg})`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundColor:\r\n            theme.palette.type === \"light\"\r\n                ? theme.palette.grey[50]\r\n                : theme.palette.grey[900],\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n    },\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nexport default function SignIn() {\r\n    const context = useContext(AuthContext);\r\n    const classes = useStyles();\r\n    const [login, { loading, error }] = useMutation(LOGIN_Mutation);\r\n    const [loginErr, setloginErr] = useState(\"\");\r\n    const history = useHistory();\r\n    const validationSchema = Yup.object({\r\n        email: Yup.string(\"Enter your email\")\r\n            .email(\"Enter a valid email\")\r\n            .required(\"Email is required\"),\r\n        password: Yup.string(\"\")\r\n            .min(6, \"Password must contain at least 6 characters\")\r\n            .required(\"Enter your password\"),\r\n    });\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: \"\",\r\n            password: \"\",\r\n        },\r\n        validationSchema,\r\n        onSubmit: async (values) => {\r\n            try {\r\n                const { email, password } = values;\r\n                const response = await login({\r\n                    variables: {\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                if (response && response.data) {\r\n                    setAccessToken(response.data.login.accessToken);\r\n                }\r\n                context.login(response.data.login);\r\n                history.push(\"/dashboard\");\r\n            } catch (err) {\r\n                console.log(err.message);\r\n                setloginErr(err.message.slice(15));\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <Grid container component=\"main\" className={classes.root}>\r\n            <CssBaseline />\r\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\r\n            <Grid\r\n                item\r\n                xs={12}\r\n                sm={8}\r\n                md={5}\r\n                component={Paper}\r\n                elevation={6}\r\n                square\r\n            >\r\n                <div className={classes.paper}>\r\n                    <Avatar className={classes.avatar}>\r\n                        <LockOutlinedIcon />\r\n                    </Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Sign in\r\n                    </Typography>\r\n                    <form\r\n                        className={classes.form}\r\n                        onSubmit={formik.handleSubmit}\r\n                        noValidate\r\n                    >\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"email\"\r\n                            label=\"Email Address\"\r\n                            name=\"email\"\r\n                            autoComplete=\"email\"\r\n                            autoFocus\r\n                            value={formik.values.email}\r\n                            onChange={formik.handleChange}\r\n                            error={\r\n                                (formik.touched.email &&\r\n                                    Boolean(formik.errors.email)) ||\r\n                                loginErr[0] === \"E\" ||\r\n                                loginErr[1] === \"e\"\r\n                            }\r\n                            helperText={\r\n                                (formik.touched.email && formik.errors.email) ||\r\n                                (loginErr[0] === \"E\" || loginErr[1] === \"e\"\r\n                                    ? loginErr\r\n                                    : null)\r\n                            }\r\n                        />\r\n\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                            onChange={formik.handleChange}\r\n                            error={\r\n                                (formik.touched.password &&\r\n                                    Boolean(formik.errors.password)) ||\r\n                                loginErr[0] === \"P\"\r\n                            }\r\n                            helperText={\r\n                                (formik.touched.password &&\r\n                                    formik.errors.password) ||\r\n                                (loginErr[0] === \"P\" ? loginErr : null)\r\n                            }\r\n                        />\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            disabled={formik.isSubmitting}\r\n                        >\r\n                            Sign In\r\n                        </Button>\r\n                        <Grid container>\r\n                            <Grid item xs>\r\n                                <Link to=\"/signup\" variant=\"body2\">\r\n                                    {\"Don't have an account? Sign Up\"}\r\n                                </Link>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box mt={5}>\r\n                            <Copyright />\r\n                        </Box>\r\n                    </form>\r\n                </div>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const CREATE_USER_MUTATION = gql`\r\n    mutation createUser(\r\n        $fname: String!\r\n        $lname: String!\r\n        $name: String!\r\n        $email: String!\r\n        $password: String!\r\n    ) {\r\n        createUser(\r\n            data: {\r\n                fname: $fname\r\n                lname: $lname\r\n                name: $name\r\n                email: $email\r\n                password: $password\r\n            }\r\n        ) {\r\n            id\r\n            name\r\n            password\r\n        }\r\n    }\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/signup.e3594763.jpg\";","import React, { useContext, useState } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import Link from \"@material-ui/core/Link\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { CREATE_USER_MUTATION } from \"../graphql/mutations\";\r\nimport { LOGIN_Mutation } from \"../graphql/login\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport loginImg from \"../icons/signup.jpg\";\r\nimport { AuthContext } from \"../routes/auth\";\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {\"Copyright © \"}\r\n            <Link color=\"inherit\" to=\"https://material-ui.com/\">\r\n                Abyss Notes\r\n            </Link>{\" \"}\r\n            {new Date().getFullYear()}\r\n            {\".\"}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        backgroundColor: \"white\",\r\n        padding: theme.spacing(2),\r\n        borderRadius: \"20px\",\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${loginImg})`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundColor:\r\n            theme.palette.type === \"light\"\r\n                ? theme.palette.grey[50]\r\n                : theme.palette.grey[900],\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    space: {\r\n        height: theme.spacing(8),\r\n    },\r\n}));\r\n\r\nexport default function SignUp() {\r\n    const context = useContext(AuthContext);\r\n\r\n    const validationSchema = Yup.object({\r\n        fname: Yup.string(\"Enter your first name\")\r\n            .min(2, \"Fist name should be of minimum 2 characters length\")\r\n            .max(50)\r\n            .required(\"First name is required\"),\r\n        lname: Yup.string(\"Enter your last name\")\r\n            .min(2, \"Fist name should be of minimum 2 characters length\")\r\n            .required(\"Last name is required\"),\r\n        name: Yup.string(\"Enter a name\")\r\n            .min(6, \"Username should be of minimum 6 characters length\")\r\n            .required(\"Name is required\"),\r\n        email: Yup.string(\"Enter your email\")\r\n            .email(\"Enter a valid email\")\r\n            .required(\"Email is required\"),\r\n        password: Yup.string(\"\")\r\n            .min(6, \"Password must contain at least 6 characters\")\r\n            .required(\"Enter your password\"),\r\n        confirmPassword: Yup.string(\"Enter your password\")\r\n            .required(\"Confirm your password\")\r\n            .oneOf([Yup.ref(\"password\")], \"Password does not match\"),\r\n    });\r\n\r\n    const history = useHistory();\r\n    const [addUser] = useMutation(CREATE_USER_MUTATION);\r\n    const [regiErr, setRegiErr] = useState(\"\");\r\n    const [login, { loading }] = useMutation(LOGIN_Mutation);\r\n    const classes = useStyles();\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            fname: \"\",\r\n            lname: \"\",\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n        },\r\n        validationSchema,\r\n        onSubmit: async (values) => {\r\n            //alert(JSON.stringify(values, null, 2));\r\n            try {\r\n                const { fname, lname, name, email, password } = values;\r\n                await addUser({\r\n                    variables: {\r\n                        fname,\r\n                        lname,\r\n                        name,\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                const response = await login({\r\n                    variables: {\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                if (!loading) {\r\n                    console.log(\"redirect\");\r\n                }\r\n                if (response && response.data) {\r\n                    console.log(\"response\");\r\n                    console.log(response.data);\r\n                    setAccessToken(response.data.login.accessToken);\r\n                }\r\n                context.login(response.data.login);\r\n                history.push(\"/dashboard\");\r\n            } catch (err) {\r\n                console.log(err.message);\r\n                setRegiErr(err.message.slice(15));\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div\r\n            style={{ width: \"100vw\", height: \"100vh\" }}\r\n            className={classes.image}\r\n        >\r\n            <Container\r\n                component=\"main\"\r\n                maxWidth=\"xs\"\r\n                style={{ height: \"100%\" }}\r\n            >\r\n                <CssBaseline />\r\n                <div className={classes.space}></div>\r\n                <div className={classes.paper}>\r\n                    <Avatar className={classes.avatar}>\r\n                        <LockOutlinedIcon />\r\n                    </Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Sign up\r\n                    </Typography>\r\n                    <form\r\n                        className={classes.form}\r\n                        onSubmit={formik.handleSubmit}\r\n                        noValidate\r\n                    >\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    autoComplete=\"fname\"\r\n                                    name=\"fname\"\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"fname\"\r\n                                    label=\"First name\"\r\n                                    autoFocus\r\n                                    value={formik.values.fname}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.fname &&\r\n                                        Boolean(formik.errors.fname)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.fname &&\r\n                                        formik.errors.fname\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"lname\"\r\n                                    label=\"Last name\"\r\n                                    name=\"lname\"\r\n                                    autoComplete=\"lname\"\r\n                                    value={formik.values.lname}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.lname &&\r\n                                        Boolean(formik.errors.lname)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.lname &&\r\n                                        formik.errors.lname\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    autoComplete=\"username\"\r\n                                    name=\"name\"\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"name\"\r\n                                    label=\"Username\"\r\n                                    autoFocus\r\n                                    value={formik.values.name}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.name &&\r\n                                        Boolean(formik.errors.name)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.name &&\r\n                                        formik.errors.name\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"email\"\r\n                                    label=\"Email Address\"\r\n                                    name=\"email\"\r\n                                    autoComplete=\"email\"\r\n                                    value={formik.values.email}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        (formik.touched.email &&\r\n                                            Boolean(formik.errors.email)) ||\r\n                                        regiErr !== \"\"\r\n                                    }\r\n                                    helperText={\r\n                                        (formik.touched.email &&\r\n                                            formik.errors.email) ||\r\n                                        regiErr\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.password &&\r\n                                        Boolean(formik.errors.password)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.password &&\r\n                                        formik.errors.password\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"confirmPassword\"\r\n                                    label=\"Confirm Password\"\r\n                                    type=\"password\"\r\n                                    id=\"confirmPassword\"\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.confirmPassword &&\r\n                                        Boolean(formik.errors.confirmPassword)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.confirmPassword &&\r\n                                        formik.errors.confirmPassword\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            disabled={formik.isSubmitting}\r\n                        >\r\n                            Sign Up\r\n                        </Button>\r\n                        <Grid container justify=\"flex-end\">\r\n                            <Grid item xs>\r\n                                <Link to=\"/login\" variant=\"body2\">\r\n                                    Already have an account? Sign in\r\n                                </Link>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </form>\r\n                </div>\r\n                <Box mt={5}>\r\n                    <Copyright />\r\n                </Box>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"./auth\";\r\n\r\nfunction AuthRoute({ component: Component, ...rest }) {\r\n    const { user } = useContext(AuthContext);\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                user ? <Redirect to=\"/dashboard\" /> : <Component {...props} />\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default AuthRoute;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"./auth\";\r\n\r\nfunction ProtectRoute({ component: Component, ...rest }) {\r\n    const { user } = useContext(AuthContext);\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                user ? <Component {...props} /> : <Redirect to=\"/\" />\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default ProtectRoute;\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    menubarButton: {\r\n        fontSize: \"14px\",\r\n        paddingTop: \"0px\",\r\n        paddingBottom: \"0px\",\r\n        paddingLeft: theme.spacing(1),\r\n        paddingRight: theme.spacing(1),\r\n        flexShrink: 0,\r\n\r\n        textTransform: \"none\",\r\n    },\r\n    menuItem: {\r\n        fontSize: \"14px\",\r\n        width: \"128px\",\r\n    },\r\n    disabledMenuItem: {\r\n        cursor: \"default\",\r\n        color: \"rgb(180, 180, 180)!important\",\r\n        backgroundColor: \"white!important\",\r\n    },\r\n}));\r\n\r\nexport default function SimpleMenu(props) {\r\n    const classes = useStyles();\r\n    const { name, sections } = props.menu;\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                className={classes.menubarButton}\r\n                aria-controls=\"name\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleClick}\r\n                onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\") {\r\n                        e.preventDefault();\r\n                    }\r\n                }}\r\n            >\r\n                {name}\r\n            </Button>\r\n            <Menu\r\n                id=\"name\"\r\n                anchorEl={anchorEl}\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={() => {\r\n                    setAnchorEl(null);\r\n                }}\r\n            >\r\n                {sections.map((section) => (\r\n                    <MenuItem\r\n                        className={clsx(classes.menuItem, {\r\n                            [classes.disabledMenuItem]:\r\n                                section.name === \"Save\" &&\r\n                                !document.getElementById(\"saveMain\"),\r\n                        })}\r\n                        onClick={() => {\r\n                            section.func();\r\n                            setAnchorEl(null);\r\n                        }}\r\n                    >\r\n                        {section.name}\r\n                    </MenuItem>\r\n                ))}\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const LOGOUT_Mutation = gql`\r\n    mutation {\r\n        logout\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const UPLOAD_Mutation = gql`\r\n    mutation upload($id: String!, $picture: String!) {\r\n        upload(id: $id, picture: $picture)\r\n    }\r\n`;\r\n","import { createContext } from \"react\";\r\n\r\nconst AvatarContext = createContext({\r\n    avatar: String,\r\n    setAvatar: () => {},\r\n});\r\n\r\nexport { AvatarContext };\r\n","import React, {\r\n    useState,\r\n    useCallback,\r\n    useRef,\r\n    useEffect,\r\n    useContext,\r\n} from \"react\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UPLOAD_Mutation } from \"../../graphql/upload\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\n\r\nasync function generateDownload(canvas, crop, upload, id, setAvatar) {\r\n    try {\r\n        if (!crop || !canvas) {\r\n            return;\r\n        }\r\n        let url = canvas.toDataURL(\"image/png\");\r\n        await upload({\r\n            variables: {\r\n                id,\r\n                picture: url,\r\n            },\r\n        });\r\n        setAvatar(url);\r\n    } catch (err) {\r\n        console.log(err);\r\n        return err;\r\n    }\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: \"60vw\",\r\n        height: \"60vh\",\r\n        padding: theme.spacing(0, 3),\r\n    },\r\n    dialogButtonWrapper: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        flexGrow: 1,\r\n    },\r\n    dialogButton: {\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n        textAlign: \"center\",\r\n    },\r\n    dialog: {},\r\n    input: {\r\n        display: \"none\",\r\n    },\r\n}));\r\n\r\nexport default function UploadDialog(props) {\r\n    const classes = useStyles();\r\n    const { onClose, open } = props;\r\n\r\n    const {\r\n        user: { userId: id },\r\n    } = useContext(AuthContext);\r\n    const { setAvatar } = useContext(AvatarContext);\r\n    const [upload] = useMutation(UPLOAD_Mutation);\r\n    const [upImg, setUpImg] = useState();\r\n    const imgRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [crop, setCrop] = useState({\r\n        width: 50,\r\n        height: 50,\r\n        aspect: 1 / 1,\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const onSelectFile = (e) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", () => setUpImg(reader.result));\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const onLoad = useCallback((img) => {\r\n        imgRef.current = img;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!completedCrop || !previewCanvasRef.current || !imgRef.current) {\r\n            return;\r\n        }\r\n\r\n        const image = imgRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n        const crop = completedCrop;\r\n\r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext(\"2d\");\r\n        const pixelRatio = window.devicePixelRatio;\r\n\r\n        canvas.width = crop.width * pixelRatio;\r\n        canvas.height = crop.height * pixelRatio;\r\n\r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = \"high\";\r\n\r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            crop.width,\r\n            crop.height\r\n        );\r\n    }, [completedCrop]);\r\n\r\n    return (\r\n        <Dialog\r\n            maxWidth=\"xl\"\r\n            open={open}\r\n            onClose={onClose}\r\n            aria-labelledby=\"avatarUpload\"\r\n        >\r\n            <DialogTitle id=\"avatarUpload\">Upload Avatar</DialogTitle>\r\n            <div className={classes.root}>\r\n                <ReactCrop\r\n                    src={upImg}\r\n                    onImageLoaded={onLoad}\r\n                    crop={crop}\r\n                    onChange={(c) => setCrop(c)}\r\n                    onComplete={(c) => setCompletedCrop(c)}\r\n                    circularCrop\r\n                    style={{\r\n                        maxHeight: \"100%\",\r\n                        maxWidth: \"100%\",\r\n                        overflow: \"auto\",\r\n                    }}\r\n                />\r\n                <div>\r\n                    <canvas\r\n                        ref={previewCanvasRef}\r\n                        // Rounding is important so the canvas width and height matches/is a multiple for sharpness.\r\n                        style={{\r\n                            width: Math.round(completedCrop?.width ?? 0),\r\n                            height: Math.round(completedCrop?.height ?? 0),\r\n                            display: \"none\",\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <DialogActions>\r\n                <input\r\n                    accept=\"image/*\"\r\n                    className={classes.input}\r\n                    id=\"contained-button-file\"\r\n                    type=\"file\"\r\n                    onChange={onSelectFile}\r\n                />\r\n                <label\r\n                    htmlFor=\"contained-button-file\"\r\n                    className={classes.dialogButtonWrapper}\r\n                >\r\n                    <Button\r\n                        className={classes.dialogButton}\r\n                        onClick={() => {}}\r\n                        color=\"primary\"\r\n                        component=\"span\"\r\n                    >\r\n                        Upload\r\n                    </Button>\r\n                </label>\r\n                <div className={classes.dialogButtonWrapper}>\r\n                    <Button\r\n                        className={classes.dialogButton}\r\n                        disabled={\r\n                            !completedCrop?.width || !completedCrop?.height\r\n                        }\r\n                        onClick={() => {\r\n                            generateDownload(\r\n                                previewCanvasRef.current,\r\n                                completedCrop,\r\n                                upload,\r\n                                id,\r\n                                setAvatar\r\n                            );\r\n                            onClose();\r\n                        }}\r\n                        color=\"primary\"\r\n                    >\r\n                        Save\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { LOGOUT_Mutation } from \"../../graphql/logout\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { getAccessToken, setAccessToken } from \"../../accessToken\";\r\n\r\nimport UploadDialog from \"./UploadDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    avatar: {\r\n        height: \"128px\",\r\n        width: \"128px\",\r\n        borderRadius: \"50%\",\r\n    },\r\n    headerAvatar: {\r\n        height: \"48px\",\r\n        width: \"48px\",\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        borderRadius: \"50%\",\r\n    },\r\n    headerAvatarWrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    avatarWrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nfunction SimpleDialog(props) {\r\n    const classes = useStyles();\r\n    const context = useContext(AuthContext);\r\n    const history = useHistory();\r\n    const [logout] = useMutation(LOGOUT_Mutation);\r\n\r\n    const { onClose, onOpen, selectedValue, open, avatar_src } = props;\r\n\r\n    const handleClose = () => {\r\n        onClose(selectedValue);\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            className={classes.dialog}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"account-dialog-title\"\r\n            open={open}\r\n        >\r\n            <DialogTitle id=\"account-dialog-title\">Account</DialogTitle>\r\n            <div className={classes.avatarWrapper}>\r\n                <img\r\n                    className={classes.avatar}\r\n                    src={avatar_src}\r\n                    alt=\"avatar\"\r\n                ></img>\r\n            </div>\r\n            <Button onClick={onOpen} className={classes.dialogButton}>\r\n                Change avatar\r\n            </Button>\r\n            <Button\r\n                className={classes.dialogButton}\r\n                onClick={async (e) => {\r\n                    e.preventDefault();\r\n                    await logout();\r\n                    setAccessToken(\"\");\r\n                    if (!getAccessToken()) {\r\n                        history.push(\"/\");\r\n                        context.logout();\r\n                    }\r\n                }}\r\n            >\r\n                Log out\r\n            </Button>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\nexport default function AccountDialog(props) {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [uploadOpen, setUploadOpen] = React.useState(false);\r\n    const [selectedValue, setSelectedValue] = React.useState(0);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = (value) => {\r\n        setOpen(false);\r\n        setSelectedValue(value);\r\n    };\r\n\r\n    const handleUploadClose = () => {\r\n        setUploadOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.headerAvatarWrapper}>\r\n            <img\r\n                className={classes.headerAvatar}\r\n                src={props.src}\r\n                alt=\"#\"\r\n                onClick={handleClickOpen}\r\n            />\r\n            <SimpleDialog\r\n                selectedValue={selectedValue}\r\n                open={open}\r\n                onClose={handleClose}\r\n                onOpen={() => {\r\n                    handleClose();\r\n                    setUploadOpen(true);\r\n                }}\r\n                avatar_src={props.src}\r\n            />\r\n            <UploadDialog\r\n                open={uploadOpen}\r\n                onClose={() => {\r\n                    handleUploadClose();\r\n                    handleClickOpen();\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { createContext } from \"react\";\r\n\r\nconst filecontext = createContext({\r\n  usernotes: [],\r\n  openFiles: [],\r\n  currentOpenFile: \"\",\r\n  setcurrentOpenFile: (data) => {},\r\n  setuserNotes: (data) => {},\r\n  setopenFiles: (data) => {},\r\n  actions: null,\r\n});\r\n\r\nexport { filecontext };\r\n","import React, { useContext } from \"react\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function RenameDialog(props) {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const [title, setTitle] = React.useState(\"\");\r\n    const [valid, setValid] = React.useState(true);\r\n    const [helper, setHelper] = React.useState(\"\");\r\n\r\n    const handleTitle = (val) => {\r\n        setTitle(val);\r\n        setValid(true);\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        // check title validity\r\n        if (!title) {\r\n            setValid(false);\r\n            setHelper(\"empty name!\");\r\n            return;\r\n        }\r\n        if (usernotes.findIndex((notes) => notes.title === title) !== -1) {\r\n            setValid(false);\r\n            setHelper(\"name existed!\");\r\n            return;\r\n        }\r\n        actions.new(title);\r\n        props.closeFunc();\r\n    };\r\n\r\n    return (\r\n        <Dialog open={true} aria-labelledby=\"name-dialog-title\">\r\n            <DialogTitle id=\"name-dialog-title\">File name</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    error={!valid}\r\n                    helperText={!valid ? helper : \"\"}\r\n                    margin=\"dense\"\r\n                    id=\"createBox\"\r\n                    label=\"new name\"\r\n                    fullWidth\r\n                    onChange={(e) => handleTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                            e.preventDefault();\r\n                            handleCreate();\r\n                        }\r\n                    }}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.closeFunc} color=\"primary\">\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={handleCreate} color=\"primary\">\r\n                    OK\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/icon.62305e2e.png\";","export default __webpack_public_path__ + \"static/media/title.2337ac1d.png\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport SimpleMenu from \"./MenuItem\";\r\nimport AccountDialog from \"./AccountDialog\";\r\nimport NewDialog from \"./NewDialog\";\r\nimport icon from \"../../icons/icon.png\";\r\nimport user from \"../../icons/avatar.png\";\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\nimport titleImg from \"../../icons/title.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    headerWrapper: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        flexWrap: \"nowrap\",\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    icon: {\r\n        height: \"48px\",\r\n        width: \"48px\",\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        borderRadius: \"50%\",\r\n    },\r\n    mainWrapper: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexGrow: 1,\r\n    },\r\n    titlebar: {\r\n        fontSize: \"20px\",\r\n        height: \"48px\",\r\n        border: \"1px transparent\",\r\n    },\r\n    titleImg: {\r\n        maxHeight: \"48px\",\r\n        objectFit: \"contain\",\r\n    },\r\n    menubar: {\r\n        minHeight: \"0px\",\r\n        padding: \"0px\",\r\n        overflowX: \"auto\",\r\n    },\r\n}));\r\n\r\nexport default function Header() {\r\n    const classes = useStyles();\r\n    const [openNewDialog, setOpenNewDialog] = React.useState(false);\r\n    const { avatar } = useContext(AvatarContext);\r\n\r\n    const file_menu = {\r\n        name: \"File\",\r\n        sections: [\r\n            {\r\n                name: \"New\",\r\n                func: () => {\r\n                    setOpenNewDialog(true);\r\n                },\r\n            },\r\n            {\r\n                name: \"Save\",\r\n                func: () => {\r\n                    let saveButton = document.getElementById(\"saveMain\");\r\n                    if (saveButton) {\r\n                        saveButton.click();\r\n                    }\r\n                },\r\n            },\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.headerWrapper}>\r\n                <img className={classes.icon} src={icon} alt=\"#\" />\r\n                <Box className={classes.mainWrapper}>\r\n                    <div className={classes.titlebar}>\r\n                        <img src={titleImg} className={classes.titleImg} />\r\n                    </div>\r\n                    <Toolbar\r\n                        component=\"nav\"\r\n                        variant=\"dense\"\r\n                        className={classes.menubar}\r\n                    >\r\n                        <SimpleMenu menu={file_menu}></SimpleMenu>\r\n                        {openNewDialog ? (\r\n                            <NewDialog\r\n                                closeFunc={() => {\r\n                                    setOpenNewDialog(false);\r\n                                }}\r\n                            ></NewDialog>\r\n                        ) : null}\r\n                    </Toolbar>\r\n                </Box>\r\n                <IconButton style={{ display: \"none\" }}>\r\n                    <SettingsIcon fontSize=\"large\" />\r\n                </IconButton>\r\n                <AccountDialog src={avatar ? avatar : user}></AccountDialog>\r\n            </Box>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogButton: {\r\n        width: \"128px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function SaveDialog(props) {\r\n    const classes = useStyles();\r\n    const { updFunc, closeFunc } = props.func;\r\n\r\n    return (\r\n        <Dialog open={true} aria-labelledby=\"save-dialog-title\">\r\n            <DialogTitle id=\"save-dialog-title\">Save File?</DialogTitle>\r\n            <DialogActions>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={updFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    Yes\r\n                </Button>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={closeFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    No\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport RemarkMathPlugin from \"remark-math\";\r\nimport { BlockMath, InlineMath } from \"react-katex\";\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport { vscDarkPlus } from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\nimport gfm from \"remark-gfm\";\r\nimport \"katex/dist/katex.min.css\";\r\n\r\nconst _mapProps = (props) => ({\r\n    ...props,\r\n    escapeHtml: false,\r\n    plugins: [[gfm, { singleTilde: false }], RemarkMathPlugin],\r\n    renderers: {\r\n        ...props.renderers,\r\n        code: ({ language, value }) => {\r\n            if (value) {\r\n                return (\r\n                    <SyntaxHighlighter\r\n                        style={vscDarkPlus}\r\n                        language={language}\r\n                        children={value}\r\n                    />\r\n                );\r\n            } else {\r\n                return (\r\n                    <>\r\n                        <>{\"~~~\" + language}</>\r\n                        <br></br>\r\n                        <>~~~</>\r\n                    </>\r\n                );\r\n            }\r\n        },\r\n        math: ({ value }) => <BlockMath>{value}</BlockMath>,\r\n        inlineMath: ({ value }) => <InlineMath>{value}</InlineMath>,\r\n    },\r\n});\r\n\r\nconst Markdown = (props) => <ReactMarkdown {..._mapProps(props)} />;\r\n\r\nexport default Markdown;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const UPDNOTE_Mutation = gql`\r\n    mutation updateNote(\r\n        $id: String!\r\n        $email: String!\r\n        $title: String\r\n        $markdown: String\r\n        $tags: [String]\r\n        $links: [String]\r\n    ) {\r\n        updateNote(\r\n            data: {\r\n                id: $id\r\n                email: $email\r\n                title: $title\r\n                markdown: $markdown\r\n                tags: $tags\r\n                links: $links\r\n            }\r\n        )\r\n    }\r\n`;\r\n","import { String } from \"core-js\";\r\nimport { createContext } from \"react\";\r\n\r\nconst mainContext = createContext({\r\n    mode: String,\r\n    setMode: () => {},\r\n    open: Boolean,\r\n    setOpen: () => {},\r\n    searchStr: String,\r\n    setSearchStr: () => {},\r\n    guide: String,\r\n});\r\n\r\nexport { mainContext };\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport SaveDialog from \"./SaveDialog\";\r\n\r\nimport Markdown from \"./Markdown\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UPDNOTE_Mutation } from \"../../graphql/updateNote\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst pageBarHeight = 24;\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexGrow: 1,\r\n    },\r\n    pageBar: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        alignItems: \"center\",\r\n        listStyle: \"none\",\r\n        margin: 0,\r\n        height: pageBarHeight,\r\n        overflowY: \"auto\",\r\n\r\n        backgroundColor: \"#E0E0E0\",\r\n    },\r\n    chip: {\r\n        margin: \"0px\",\r\n        borderRadius: \"0px\",\r\n        borderRight: `2px solid ${theme.palette.divider}`,\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    chipRoot: {\r\n        transform: \"none\",\r\n        \"&:focus\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n    chipText: {\r\n        width: theme.spacing(12),\r\n        textAlign: \"left\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    chipFocus: {\r\n        backgroundColor: \"white\",\r\n        borderBottom: \"1px solid white!important\",\r\n        \"&:hover\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n    },\r\n    markdown: {\r\n        padding: theme.spacing(3, 0),\r\n    },\r\n    mainWindowWrapper: {\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        position: \"relative\",\r\n    },\r\n    mainWindow: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        borderRadius: \"0px\",\r\n        overflow: \"auto\",\r\n    },\r\n    viewWindow: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        borderRadius: \"0px\",\r\n        overflow: \"auto\",\r\n    },\r\n    modeButtonWrapper: {\r\n        display: \"flex\",\r\n        position: \"absolute\",\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(2),\r\n        borderRadius: \"16px\",\r\n        border: \"1px solid black\",\r\n        backgroundColor: \"white\",\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"0px 3px\",\r\n    },\r\n    inputStyle: {\r\n        width: \"100%\",\r\n        height: \"calc(100vh - 130px)\",\r\n        fontSize: \"18px\",\r\n        padding: theme.spacing(2, 4),\r\n        resize: \"none\",\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        overflow: \"auto\",\r\n    },\r\n    outputStyle: {\r\n        width: \"100%\",\r\n        height: \"calc(100vh - 130px)\",\r\n        fontSize: \"18px\",\r\n        textAlign: \"left\",\r\n        backgroundColor: \"white\",\r\n        padding: theme.spacing(2, 4),\r\n        overflow: \"auto\",\r\n    },\r\n}));\r\n\r\nexport default function Main() {\r\n    const [updNote] = useMutation(UPDNOTE_Mutation);\r\n    const {\r\n        user: { email },\r\n    } = useContext(AuthContext);\r\n    const { guide } = useContext(mainContext);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const { usernotes, openFiles, currentOpenFile, actions } = useContext(\r\n        filecontext\r\n    );\r\n\r\n    const [mode, setMode] = React.useState(\"main\");\r\n    const [pageNum, setPageNum] = React.useState(0);\r\n    const [pages, setPages] = React.useState([]);\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n    const [dialogFunctions, setDialogFunctions] = React.useState({});\r\n\r\n    // add page in frontend\r\n    const addPage = (node) => {\r\n        setPages([...pages, node]);\r\n        setPageNum(pageNum + 1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (openFiles.length > pageNum) {\r\n            let fileID = openFiles[openFiles.length - 1];\r\n            let node = Object.assign(\r\n                { unsaved: false },\r\n                usernotes.find((e) => e.id === fileID)\r\n            );\r\n            addPage(node);\r\n        }\r\n    }, [openFiles]);\r\n\r\n    // delete page\r\n    const handleDelete = (id) => {\r\n        let chipToDelete = openFiles.indexOf(id);\r\n        if (pages[chipToDelete].unsaved) {\r\n            setOpenDialog(true);\r\n            setDialogFunctions({\r\n                updFunc: async (e) => {\r\n                    await save(id);\r\n                    deletePage(id);\r\n                    setOpenDialog(false);\r\n                },\r\n                closeFunc: () => {\r\n                    deletePage(id);\r\n                    setOpenDialog(false);\r\n                },\r\n            });\r\n        } else {\r\n            deletePage(id);\r\n        }\r\n    };\r\n    const deletePage = (id) => {\r\n        let chipToDelete = openFiles.indexOf(id);\r\n\r\n        // set backend openFiles\r\n        actions.close(id);\r\n\r\n        // set frontend pages\r\n        let updPages = pages.filter((data, index) => index !== chipToDelete);\r\n        setPages(updPages);\r\n\r\n        // set pageNum\r\n        setPageNum(pageNum - 1);\r\n    };\r\n\r\n    const handleMode = (updMode) => {\r\n        setMode(updMode);\r\n    };\r\n\r\n    const handleContentData = (val) => {\r\n        let currentPageIndex = openFiles.indexOf(currentOpenFile);\r\n        let updPages = [...pages];\r\n        updPages[currentPageIndex].markdown = val;\r\n        updPages[currentPageIndex].unsaved = true;\r\n        setPages(updPages);\r\n    };\r\n\r\n    const save = async (fileID) => {\r\n        let currentPageIndex = openFiles.indexOf(fileID);\r\n        const { id, title, markdown, tags, unsaved } = pages[currentPageIndex];\r\n        if (unsaved) {\r\n            try {\r\n                const regex = /\\[\\[(\\w*?)\\]\\]/gm;\r\n                const str = markdown;\r\n                let g;\r\n                let links = [];\r\n                while ((g = regex.exec(str)) !== null) {\r\n                    // This is necessary to avoid infinite loops with zero-width matches\r\n                    if (g.index === regex.lastIndex) {\r\n                        regex.lastIndex++;\r\n                    }\r\n\r\n                    // The result can be accessed through the `m`-variable.\r\n                    g.forEach((match, groupIndex) => {\r\n                        if (groupIndex === 1) links.push(match);\r\n                    });\r\n                }\r\n                let newPages = [...pages];\r\n                newPages[currentPageIndex].links = links;\r\n                actions.save(fileID, {\r\n                    id,\r\n                    title,\r\n                    markdown,\r\n                    tags,\r\n                    links,\r\n                });\r\n                newPages[currentPageIndex].unsaved = false;\r\n                setPages(newPages);\r\n                await updNote({\r\n                    variables: { id, email, markdown, links },\r\n                });\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            {openFiles.length === 0 ? (\r\n                <div className={classes.mainWindowWrapper}>\r\n                    <Markdown className={`input ${classes.outputStyle}`}>\r\n                        {guide}\r\n                    </Markdown>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div className={classes.pageBar}>\r\n                        {openFiles.map((fileID, index) => {\r\n                            return (\r\n                                <li key={index}>\r\n                                    <Chip\r\n                                        size=\"small\"\r\n                                        label={\r\n                                            usernotes.find(\r\n                                                (e) => e.id === fileID\r\n                                            ).title\r\n                                        }\r\n                                        disableRipple={true}\r\n                                        onClick={(e) => {\r\n                                            actions.open(fileID);\r\n                                            document\r\n                                                .getElementsByClassName(\r\n                                                    \"input\"\r\n                                                )[0]\r\n                                                .focus();\r\n                                        }}\r\n                                        onDelete={() => handleDelete(fileID)}\r\n                                        className={clsx(classes.chip, {\r\n                                            [classes.chipFocus]:\r\n                                                fileID === currentOpenFile,\r\n                                        })}\r\n                                        classes={{\r\n                                            root: classes.chipRoot,\r\n                                            label: classes.chipText,\r\n                                        }}\r\n                                    />\r\n                                </li>\r\n                            );\r\n                        })}\r\n                        <div\r\n                            style={{\r\n                                flexGrow: 1,\r\n                                height: pageBarHeight,\r\n                                borderBottom: `1px solid ${theme.palette.divider}`,\r\n                            }}\r\n                        ></div>\r\n                    </div>\r\n                    <div className={classes.mainWindowWrapper}>\r\n                        <div className={classes.modeButtonWrapper}>\r\n                            <IconButton\r\n                                color={mode === \"main\" ? \"inherit\" : \"default\"}\r\n                                onClick={() => handleMode(\"main\")}\r\n                                classes={{\r\n                                    root: classes.nopad,\r\n                                }}\r\n                                disableRipple={true}\r\n                            >\r\n                                <EditIcon />\r\n                            </IconButton>\r\n                            <Divider\r\n                                orientation=\"vertical\"\r\n                                style={{\r\n                                    height: \"24px\",\r\n                                    backgroundColor: \"rgb(160, 160, 160)\",\r\n                                }}\r\n                            ></Divider>\r\n                            <IconButton\r\n                                color={mode === \"mix\" ? \"inherit\" : \"default\"}\r\n                                onClick={() => handleMode(\"mix\")}\r\n                                classes={{\r\n                                    root: classes.nopad,\r\n                                }}\r\n                                disableRipple={true}\r\n                            >\r\n                                <VisibilityIcon />\r\n                            </IconButton>\r\n                            {pageNum === openFiles.length &&\r\n                            pages[openFiles.indexOf(currentOpenFile)]\r\n                                .unsaved ? (\r\n                                <>\r\n                                    <Divider\r\n                                        orientation=\"vertical\"\r\n                                        style={{\r\n                                            height: \"24px\",\r\n                                            backgroundColor:\r\n                                                \"rgb(160, 160, 160)\",\r\n                                        }}\r\n                                    ></Divider>\r\n                                    <IconButton\r\n                                        id=\"saveMain\"\r\n                                        onClick={() => save(currentOpenFile)}\r\n                                        classes={{\r\n                                            root: classes.nopad,\r\n                                        }}\r\n                                        disableRipple={true}\r\n                                    >\r\n                                        <SaveIcon />\r\n                                    </IconButton>\r\n                                </>\r\n                            ) : null}\r\n                            {openDialog ? (\r\n                                <SaveDialog func={dialogFunctions}></SaveDialog>\r\n                            ) : null}\r\n                        </div>\r\n                        {mode === \"main\" || mode === \"mix\" ? (\r\n                            <Paper\r\n                                elevation={0}\r\n                                className={classes.mainWindow}\r\n                                style={mode === \"main\" ? { width: \"100%\" } : {}}\r\n                            >\r\n                                <textarea\r\n                                    autoFocus\r\n                                    className={`input ${classes.inputStyle}`}\r\n                                    value={\r\n                                        pageNum === openFiles.length\r\n                                            ? pages[\r\n                                                  openFiles.indexOf(\r\n                                                      currentOpenFile\r\n                                                  )\r\n                                              ].markdown\r\n                                            : \"\"\r\n                                    }\r\n                                    onChange={(e) => {\r\n                                        handleContentData(e.target.value);\r\n                                    }}\r\n                                ></textarea>\r\n                            </Paper>\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                        {mode === \"mix\" ? (\r\n                            <Divider orientation=\"vertical\"></Divider>\r\n                        ) : null}\r\n                        {mode === \"view\" || mode === \"mix\" ? (\r\n                            <Paper\r\n                                elevation={0}\r\n                                className={classes.viewWindow}\r\n                                style={mode === \"view\" ? { width: \"100%\" } : {}}\r\n                            >\r\n                                <Markdown\r\n                                    className={`input ${classes.outputStyle}`}\r\n                                >\r\n                                    {pageNum === openFiles.length\r\n                                        ? pages[\r\n                                              openFiles.indexOf(currentOpenFile)\r\n                                          ].markdown\r\n                                        : \"\"}\r\n                                </Markdown>\r\n                            </Paper>\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const NOTES_QUERY = gql`\r\n    query usernotes($email: String!) {\r\n        usernotes(email: $email) {\r\n            id\r\n            tags\r\n            links\r\n            markdown\r\n            title\r\n        }\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const AVATAR_QUERY = gql`\r\n    query userAvatar($id: String!) {\r\n        userAvatar(id: $id)\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const GUIDE_QUERY = gql`\r\n    query {\r\n        user\r\n    }\r\n`;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    titlebar: {\r\n        flexGrow: 1,\r\n        fontSize: \"14px\",\r\n        margin: theme.spacing(1),\r\n        outline: \"none\",\r\n        padding: \"1px 6px\",\r\n        borderRadius: \"12px\",\r\n        borderColor: `${theme.palette.divider}`,\r\n        \"&:focus\": {\r\n            borderColor: theme.palette.text.primary,\r\n        },\r\n    },\r\n    linksIOTitle: {\r\n        height: \"28px\",\r\n        padding: theme.spacing(2, 0),\r\n    },\r\n}));\r\n\r\nexport default function SearchBox() {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const { searchStr, setSearchStr } = useContext(mainContext);\r\n    const [tagItem, setTagItem] = useState([]);\r\n    const [titleItem, setTitleItem] = useState([]);\r\n    const [mdItem, setMdItem] = useState([]);\r\n    const [openTitle, setOpenTitle] = useState(false);\r\n    const [openMd, setOpenMd] = useState(false);\r\n\r\n    const autoFocus = () => {\r\n        if (document.getElementsByClassName(\"input\")[0]) {\r\n            document.getElementsByClassName(\"input\")[0].focus();\r\n        }\r\n    };\r\n\r\n    const search = (e) => {\r\n        setSearchStr(e.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (searchStr) {\r\n            if (searchStr.slice(0, 5) === \"tags:\") {\r\n                let alltags = [];\r\n                usernotes.forEach((e) => {\r\n                    let { title, id, markdown } = e;\r\n                    e.tags.forEach((ele) => {\r\n                        if (ele === searchStr.slice(6)) {\r\n                            console.log(\"success\");\r\n                            alltags.push({ title, id, markdown });\r\n                        }\r\n                    });\r\n                });\r\n                console.log(\"search tag\");\r\n                setTagItem(alltags);\r\n            } else {\r\n                let titlefiles = [];\r\n                let mdfiles = [];\r\n                usernotes.forEach((e) => {\r\n                    let { title, id, markdown } = e;\r\n                    if (e.title.includes(searchStr)) {\r\n                        titlefiles.push({ title, id, markdown });\r\n                    }\r\n                    if (e.markdown.includes(searchStr)) {\r\n                        mdfiles.push({ title, id, markdown });\r\n                    }\r\n                });\r\n                console.log(\"search files\");\r\n                setTitleItem(titlefiles);\r\n                setMdItem(mdfiles);\r\n            }\r\n        } else {\r\n            setTitleItem([]);\r\n            setMdItem([]);\r\n        }\r\n\r\n        return () => {};\r\n    }, [searchStr]);\r\n\r\n    return (\r\n        <>\r\n            <CssBaseline />\r\n            <div style={{ display: \"flex\" }}>\r\n                <input\r\n                    id=\"searchbox\"\r\n                    className={classes.titlebar}\r\n                    placeholder=\"Search files or tags\"\r\n                    onChange={search}\r\n                    value={searchStr}\r\n                />\r\n            </div>\r\n            <Divider style={{ height: \"3px\" }} />\r\n            <div style={{ flexGrow: 1, overflowY: \"auto\" }}>\r\n                <List disablePadding={true}>\r\n                    {searchStr.slice(0, 5) === \"tags:\" ? (\r\n                        tagItem.map((obj, index) => (\r\n                            <>\r\n                                <ListItem\r\n                                    button\r\n                                    key={index}\r\n                                    onClick={() => {\r\n                                        actions.open(obj.id);\r\n                                        autoFocus();\r\n                                    }}\r\n                                >\r\n                                    <ListItemText primary={obj.title} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                            </>\r\n                        ))\r\n                    ) : (\r\n                        <>\r\n                            <ListItem\r\n                                button\r\n                                key=\"titleMatched\"\r\n                                onClick={() => setOpenTitle(!openTitle)}\r\n                                className={classes.linksIOTitle}\r\n                            >\r\n                                {openTitle ? (\r\n                                    <ExpandLessIcon />\r\n                                ) : (\r\n                                    <ExpandMoreIcon />\r\n                                )}\r\n                                <ListItemText primary={\"File\"} />\r\n                            </ListItem>\r\n                            <Divider />\r\n                            {openTitle\r\n                                ? titleItem.map((obj, index) => (\r\n                                      <>\r\n                                          <ListItem\r\n                                              button\r\n                                              key={index}\r\n                                              onClick={() => {\r\n                                                  actions.open(obj.id);\r\n                                                  autoFocus();\r\n                                              }}\r\n                                          >\r\n                                              <ListItemText\r\n                                                  primary={obj.title}\r\n                                              />\r\n                                          </ListItem>\r\n                                          <Divider />\r\n                                      </>\r\n                                  ))\r\n                                : null}\r\n                            <ListItem\r\n                                button\r\n                                key=\"mdMatched\"\r\n                                onClick={() => setOpenMd(!openMd)}\r\n                                className={classes.linksIOTitle}\r\n                            >\r\n                                {openMd ? (\r\n                                    <ExpandLessIcon />\r\n                                ) : (\r\n                                    <ExpandMoreIcon />\r\n                                )}\r\n                                <ListItemText primary={\"Content\"} />\r\n                            </ListItem>\r\n                            <Divider />\r\n                            {openMd\r\n                                ? mdItem.map((obj, index) => (\r\n                                      <>\r\n                                          <ListItem\r\n                                              button\r\n                                              key={index}\r\n                                              onClick={() => {\r\n                                                  actions.open(obj.id);\r\n                                                  autoFocus();\r\n                                              }}\r\n                                          >\r\n                                              <ListItemText\r\n                                                  primary={obj.title}\r\n                                              />\r\n                                          </ListItem>\r\n                                          <Divider />\r\n                                      </>\r\n                                  ))\r\n                                : null}\r\n                        </>\r\n                    )}\r\n                </List>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function RenameDialog(props) {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const [title, setTitle] = React.useState(\"\");\r\n    const [valid, setValid] = React.useState(true);\r\n    const [helper, setHelper] = React.useState(\"\");\r\n\r\n    const handleTitle = (val) => {\r\n        setTitle(val);\r\n        setValid(true);\r\n    };\r\n\r\n    const handleRename = () => {\r\n        // check title validity\r\n        if (!title) {\r\n            setValid(false);\r\n            setHelper(\"empty name!\");\r\n            return;\r\n        }\r\n        if (usernotes.findIndex((notes) => notes.title === title) !== -1) {\r\n            setValid(false);\r\n            setHelper(\"name existed!\");\r\n            return;\r\n        }\r\n        actions.rename(props.fileID, title);\r\n        props.closeFunc();\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={true}\r\n            aria-labelledby={`form-dialog-title_${props.fileID}`}\r\n        >\r\n            <DialogTitle id={`form-dialog-title_${props.fileID}`}>\r\n                New name\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    error={!valid}\r\n                    helperText={!valid ? helper : \"\"}\r\n                    margin=\"dense\"\r\n                    id={`renameBox_${props.fileID}`}\r\n                    label=\"new name\"\r\n                    fullWidth\r\n                    onChange={(e) => handleTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                            e.preventDefault();\r\n                            handleRename();\r\n                        }\r\n                    }}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.closeFunc} color=\"primary\">\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={handleRename} color=\"primary\">\r\n                    OK\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogButton: {\r\n        width: \"128px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function DeleteDialog(props) {\r\n    const classes = useStyles();\r\n    const { actions } = useContext(filecontext);\r\n\r\n    return (\r\n        <Dialog\r\n            open={true}\r\n            aria-labelledby={`delete-dialog-title_${props.fileID}`}\r\n        >\r\n            <DialogTitle id={`delete-dialog-title_${props.fileID}`}>\r\n                {`Delete ${props.title}?`}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={() => {\r\n                        actions.delete(props.fileID);\r\n                        props.closeFunc();\r\n                    }}\r\n                    color=\"primary\"\r\n                >\r\n                    Yes\r\n                </Button>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={props.closeFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    No\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\n\r\nimport RenameDialog from \"./RenameDialog\";\r\nimport DeleteDialog from \"./DeleteDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    labelIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    labelText: {\r\n        textAlign: \"left\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"inherit\",\r\n        overflow: \"hidden\",\r\n        whiteSpace: \"nowrap\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    menuItem: {\r\n        fontSize: \"14px\",\r\n        width: \"128px\",\r\n    },\r\n}));\r\n\r\nexport default function TreeMenu(props) {\r\n    const classes = useStyles();\r\n    const node = props.node;\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [openRenameDialog, setOpenRenameDialog] = React.useState(false);\r\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\r\n    const data = useContext(filecontext);\r\n    const { actions } = data;\r\n\r\n    const handleClick = (event) => {\r\n        event.preventDefault();\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div\r\n                onContextMenu={handleClick}\r\n                style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    position: \"relative\",\r\n                }}\r\n                onClick={(e) => {\r\n                    if (e.button === 0) {\r\n                        actions.open(node.id);\r\n                        if (document.getElementsByClassName(\"input\")[0])\r\n                            document.getElementsByClassName(\"input\")[0].focus();\r\n                    } else if (e.button === 2) {\r\n                        handleClick();\r\n                    }\r\n                }}\r\n            >\r\n                {node.type === \"dir\" ? (\r\n                    <FolderIcon\r\n                        fontSize=\"small\"\r\n                        className={classes.labelIcon}\r\n                    />\r\n                ) : (\r\n                    <InsertDriveFileIcon\r\n                        fontSize=\"small\"\r\n                        className={classes.labelIcon}\r\n                    />\r\n                )}\r\n\r\n                <Typography className={classes.labelText}>\r\n                    {node.title}\r\n                </Typography>\r\n            </div>\r\n            {node.type !== \"dir\" ? (\r\n                <Menu\r\n                    id=\"name\"\r\n                    anchorEl={anchorEl}\r\n                    getContentAnchorEl={null}\r\n                    anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n                    transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n                    keepMounted\r\n                    open={Boolean(anchorEl)}\r\n                    onClose={() => {\r\n                        setAnchorEl(null);\r\n                    }}\r\n                    autoFocus={false}\r\n                >\r\n                    <MenuItem\r\n                        className={classes.menuItem}\r\n                        onClick={() => {\r\n                            setOpenRenameDialog(true);\r\n                            setAnchorEl(null);\r\n                        }}\r\n                        onKeyDown={(e) => {\r\n                            if (e.key === \"Enter\") {\r\n                                e.preventDefault();\r\n                            }\r\n                        }}\r\n                    >\r\n                        Rename\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        className={classes.menuItem}\r\n                        onClick={() => {\r\n                            setOpenDeleteDialog(true);\r\n                            setAnchorEl(null);\r\n                        }}\r\n                    >\r\n                        Delete\r\n                    </MenuItem>\r\n                </Menu>\r\n            ) : null}\r\n            {openRenameDialog ? (\r\n                <RenameDialog\r\n                    fileID={node.id}\r\n                    closeFunc={() => setOpenRenameDialog(false)}\r\n                ></RenameDialog>\r\n            ) : null}\r\n            {openDeleteDialog ? (\r\n                <DeleteDialog\r\n                    fileID={node.id}\r\n                    title={node.title}\r\n                    closeFunc={() => setOpenDeleteDialog(false)}\r\n                ></DeleteDialog>\r\n            ) : null}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TreeView from \"@material-ui/lab/TreeView\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport TreeItem from \"@material-ui/lab/TreeItem\";\r\nimport TreeMenu from \"./TreeMenuItem\";\r\n\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 110,\r\n        flexGrow: 1,\r\n        maxWidth: 400,\r\n        paddingTop: \"6px\",\r\n    },\r\n    labelIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    labelText: {\r\n        textAlign: \"left\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"inherit\",\r\n        overflow: \"hidden\",\r\n        whiteSpace: \"nowrap\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    colorWhite1: {\r\n        \"&.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function FolderTree() {\r\n    const classes = useStyles();\r\n    const data = useContext(filecontext);\r\n    const context = useContext(AuthContext);\r\n\r\n    const renderTree = (node) => (\r\n        <TreeItem\r\n            key={node.id}\r\n            nodeId={node.id}\r\n            label={<TreeMenu node={node}></TreeMenu>}\r\n            classes={{\r\n                root: classes.colorWhite1,\r\n            }}\r\n        >\r\n            {Array.isArray(node.usernotes)\r\n                ? node.usernotes.map((child) => renderTree(child))\r\n                : null}\r\n        </TreeItem>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <TreeView\r\n                className={classes.root}\r\n                defaultCollapseIcon={<ExpandMoreIcon />}\r\n                defaultExpanded={[\"root\"]}\r\n                defaultExpandIcon={<ChevronRightIcon />}\r\n            >\r\n                {renderTree({\r\n                    ...data,\r\n                    id: \"root\",\r\n                    title: context.user.name,\r\n                    type: \"dir\",\r\n                })}\r\n            </TreeView>\r\n        </>\r\n    );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport FolderOutlinedIcon from \"@material-ui/icons/FolderOutlined\";\r\nimport DeviceHubIcon from \"@material-ui/icons/DeviceHub\";\r\n\r\nimport SearchBox from \"./SearchBox\";\r\nimport FolderTree from \"./FolderTree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst sidebarWidth = 32;\r\nconst drawerWidth = 256;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n    },\r\n    sidebarWrapper: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"6px 0px\",\r\n    },\r\n    rootShift: {\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginRight: drawerWidth,\r\n    },\r\n    drawer: {\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaperWrapper: {\r\n        position: \"relative\",\r\n    },\r\n    drawerPaper: {\r\n        position: \"absolute\",\r\n        top: \"0px\",\r\n        right: sidebarWidth,\r\n        width: drawerWidth,\r\n        bottom: \"0px\",\r\n    },\r\n}));\r\n\r\nexport default function PersistentDrawerLeft() {\r\n    const classes = useStyles();\r\n    const { open, setOpen, mode, setMode } = useContext(mainContext);\r\n    // const [open, setOpen] = useState(false);\r\n    // const [mode, setMode] = useState(\"search\");\r\n    const [graphMode, setGraph] = useState(false);\r\n\r\n    const handleMode = (updMode) => {\r\n        setMode(updMode);\r\n        if (!open) {\r\n            setOpen(true);\r\n        }\r\n        if (open && updMode === mode) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const handleGraphMode = () => {\r\n        setGraph(!graphMode);\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(classes.root, { [classes.rootShift]: open })}>\r\n            <CssBaseline />\r\n            <div className={classes.sidebarWrapper}>\r\n                <IconButton\r\n                    color={mode === \"search\" && open ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={() => handleMode(\"search\")}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    <SearchIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    color={mode === \"file\" && open ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={() => handleMode(\"file\")}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    <FolderOutlinedIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    color={graphMode ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={handleGraphMode}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    style={{ display: \"none\" }}\r\n                    disableRipple={true}\r\n                >\r\n                    <DeviceHubIcon />\r\n                </IconButton>\r\n            </div>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                    docked: classes.drawerPaperWrapper,\r\n                }}\r\n            >\r\n                {mode === \"search\" ? (\r\n                    <SearchBox></SearchBox>\r\n                ) : (\r\n                    <FolderTree></FolderTree>\r\n                )}\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport LinkIcon from \"@material-ui/icons/Link\";\r\nimport LocalOfferOutlinedIcon from \"@material-ui/icons/LocalOfferOutlined\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\nimport { SettingsInputComponentOutlined } from \"@material-ui/icons\";\r\n\r\nconst sidebarWidth = 32;\r\nconst drawerWidth = 256;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n    },\r\n    sidebarWrapper: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"6px 0px\",\r\n    },\r\n    rootShift: {\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: drawerWidth,\r\n    },\r\n    drawer: {\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaperWrapper: {\r\n        position: \"relative\",\r\n    },\r\n    drawerPaper: {\r\n        position: \"absolute\",\r\n        top: \"0px\",\r\n        right: sidebarWidth,\r\n        width: drawerWidth,\r\n        bottom: \"0px\",\r\n    },\r\n    drawerButton: {\r\n        width: \"36px\",\r\n        padding: \"0px\",\r\n        margin: \"6px 0px 6px 6px\",\r\n    },\r\n    linksIOTitle: {\r\n        height: \"28px\",\r\n        padding: theme.spacing(2, 0),\r\n    },\r\n}));\r\n\r\nexport default function PersistentDrawerRight() {\r\n    const classes = useStyles();\r\n    const { currentOpenFile, usernotes, actions } = useContext(filecontext);\r\n    const { setSearchStr, setOpen, setMode } = useContext(mainContext);\r\n    const [r_open, setr_open] = useState(false);\r\n    const [r_mode, setr_Mode] = useState(\"link\");\r\n\r\n    //links, tags to be showed\r\n    const [inlinks, setInLink] = useState([]);\r\n    const [outlinks, setOutLink] = useState([]);\r\n    const [openIn, setOpenIn] = useState(false);\r\n    const [openOut, setOpenOut] = useState(false);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (currentOpenFile) {\r\n                let title = usernotes.find((e) => e.id === currentOpenFile)\r\n                    .title;\r\n                let inLinks = {};\r\n                let outLinks = {};\r\n                let tmp = usernotes.find((e) => e.id === currentOpenFile).links;\r\n                usernotes.forEach((e) => {\r\n                    e.links.forEach((ele) => {\r\n                        if (ele === title) {\r\n                            if (!Object.keys(inLinks).includes(e.title)) {\r\n                                inLinks[e.title] = e.id;\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n                setInLink(Object.entries(inLinks));\r\n                usernotes.forEach((e) => {\r\n                    if (tmp.includes(e.title)) {\r\n                        outLinks[e.title] = e.id;\r\n                    }\r\n                });\r\n                setOutLink(Object.entries(outLinks));\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        return () => {};\r\n    }, [usernotes, currentOpenFile]);\r\n\r\n    const [tags, setTag] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let alltags = {};\r\n        usernotes.forEach((e) => {\r\n            e.tags.forEach((ele) => {\r\n                if (Object.keys(alltags).includes(ele)) {\r\n                    alltags[ele] += 1;\r\n                } else {\r\n                    alltags[ele] = 1;\r\n                }\r\n            });\r\n        });\r\n        setTag(Object.entries(alltags));\r\n        return () => {};\r\n    }, [usernotes]);\r\n    const [showingItem, setShowingItem] = useState([]);\r\n    useEffect(() => {\r\n        setShowingItem(r_mode === \"link\" ? inlinks : tags);\r\n        return () => {};\r\n    }, [r_mode, inlinks, outlinks, tags]);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setr_open(!r_open);\r\n    };\r\n\r\n    const handleMode = (updMode) => {\r\n        setr_Mode(updMode);\r\n    };\r\n\r\n    const handleSearch = (tag) => {\r\n        setSearchStr(\"tags: \" + tag);\r\n        setOpen(true);\r\n        setMode(\"search\");\r\n    };\r\n\r\n    const handleLink = (id) => {\r\n        actions.open(id);\r\n        if (document.getElementsByClassName(\"input\")[0])\r\n            document.getElementsByClassName(\"input\")[0].focus();\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(classes.root, { [classes.rootShift]: r_open })}>\r\n            <CssBaseline />\r\n            <div className={classes.sidebarWrapper}>\r\n                <IconButton\r\n                    color=\"default\"\r\n                    aria-label=\"open drawer\"\r\n                    onClick={handleDrawerOpen}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    {r_open ? <ChevronRightIcon /> : <ChevronLeftIcon />}\r\n                </IconButton>\r\n            </div>\r\n\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"right\"\r\n                open={r_open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                    docked: classes.drawerPaperWrapper,\r\n                }}\r\n            >\r\n                <div style={{ display: \"flex\" }}>\r\n                    <IconButton\r\n                        color={r_mode === \"link\" ? \"inherit\" : \"default\"}\r\n                        onClick={() => handleMode(\"link\")}\r\n                        classes={{\r\n                            root: classes.drawerButton,\r\n                        }}\r\n                        disableRipple={true}\r\n                    >\r\n                        <LinkIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        color={r_mode === \"tag\" ? \"inherit\" : \"default\"}\r\n                        onClick={() => handleMode(\"tag\")}\r\n                        classes={{\r\n                            root: classes.drawerButton,\r\n                        }}\r\n                        disableRipple={true}\r\n                    >\r\n                        <LocalOfferOutlinedIcon />\r\n                    </IconButton>\r\n                </div>\r\n                <Divider style={{ height: \"3px\" }} />\r\n                <div style={{ flexGrow: 1, overflowY: \"auto\" }}>\r\n                    <List disablePadding={true}>\r\n                        {r_mode === \"tag\" ? (\r\n                            tags.map((text, index) => (\r\n                                <>\r\n                                    <ListItem\r\n                                        button\r\n                                        key={index}\r\n                                        onClick={() => {\r\n                                            handleSearch(text[0]);\r\n                                        }}\r\n                                    >\r\n                                        <ListItemText\r\n                                            primary={\"# \" + text[0]}\r\n                                        />\r\n                                        <ListItemText\r\n                                            primary={text[1]}\r\n                                            style={{ textAlign: \"right\" }}\r\n                                        />\r\n                                    </ListItem>\r\n                                    <Divider />\r\n                                </>\r\n                            ))\r\n                        ) : (\r\n                            <>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"inLinks\"\r\n                                    onClick={() => setOpenIn(!openIn)}\r\n                                    className={classes.linksIOTitle}\r\n                                >\r\n                                    {openIn ? (\r\n                                        <ExpandLessIcon />\r\n                                    ) : (\r\n                                        <ExpandMoreIcon />\r\n                                    )}\r\n                                    <ListItemText primary={\"Linked from...\"} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                                {openIn\r\n                                    ? inlinks.map((text, index) => (\r\n                                          <>\r\n                                              <ListItem\r\n                                                  button\r\n                                                  key={index}\r\n                                                  onClick={() => {\r\n                                                      handleLink(text[1]);\r\n                                                  }}\r\n                                              >\r\n                                                  <ListItemText\r\n                                                      primary={text[0]}\r\n                                                  />\r\n                                              </ListItem>\r\n                                              <Divider />\r\n                                          </>\r\n                                      ))\r\n                                    : null}\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"outLinks\"\r\n                                    onClick={() => setOpenOut(!openOut)}\r\n                                    className={classes.linksIOTitle}\r\n                                >\r\n                                    {openOut ? (\r\n                                        <ExpandLessIcon />\r\n                                    ) : (\r\n                                        <ExpandMoreIcon />\r\n                                    )}\r\n                                    <ListItemText primary={\"Link to...\"} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                                {openOut\r\n                                    ? outlinks.map((text, index) => (\r\n                                          <>\r\n                                              <ListItem\r\n                                                  button\r\n                                                  key={index}\r\n                                                  onClick={() => {\r\n                                                      handleLink(text[1]);\r\n                                                  }}\r\n                                              >\r\n                                                  <ListItemText\r\n                                                      primary={text[0]}\r\n                                                  />\r\n                                              </ListItem>\r\n                                              <Divider />\r\n                                          </>\r\n                                      ))\r\n                                    : null}\r\n                            </>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const ADDTAG_Mutation = gql`\r\n    mutation addtag($id: String!, $email: String!, $tag: String!) {\r\n        addtag(id: $id, email: $email, tag: $tag)\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const DELTAG_Mutation = gql`\r\n    mutation deletetag($id: String!, $email: String!, $index: Int!) {\r\n        deletetag(id: $id, email: $email, index: $index)\r\n    }\r\n`;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { ADDTAG_Mutation } from \"../../graphql/addTag\";\r\nimport { DELTAG_Mutation } from \"../../graphql/delTag\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        alignItems: \"center\",\r\n        listStyle: \"none\",\r\n        margin: 0,\r\n        height: \"32px\",\r\n        overflowY: \"auto\",\r\n    },\r\n    chip: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    titlebar: {\r\n        flexGrow: 1,\r\n        fontSize: \"14px\",\r\n        margin: theme.spacing(0.5),\r\n        outline: \"none\",\r\n        padding: \"1px 6px\",\r\n        borderRadius: \"12px\",\r\n        borderColor: `${theme.palette.divider}`,\r\n        \"&:focus\": {\r\n            borderColor: theme.palette.text.primary,\r\n        },\r\n    },\r\n    alert: {\r\n        width: \"256px\",\r\n    },\r\n}));\r\n\r\nexport default function TagBar() {\r\n    const classes = useStyles();\r\n    const { currentOpenFile, usernotes, setuserNotes } = useContext(\r\n        filecontext\r\n    );\r\n    const [anchorEle, setAnchorEle] = useState(null);\r\n\r\n    const handleClose = () => {\r\n        setAnchorEle(null);\r\n    };\r\n    React.useEffect(() => {\r\n        if (anchorEle) {\r\n            setTimeout(function () {\r\n                setAnchorEle(null);\r\n            }, 1300); //1.3 Second delay\r\n        }\r\n    }, [anchorEle]);\r\n    const open = Boolean(anchorEle);\r\n    const id = open ? \"simple-popover\" : undefined;\r\n\r\n    const context = useContext(AuthContext);\r\n    const [addtag] = useMutation(ADDTAG_Mutation);\r\n    const [deltag] = useMutation(DELTAG_Mutation);\r\n    const [tag, setTag] = useState(\"\");\r\n\r\n    const [chipData, setChipData] = useState([]);\r\n    useEffect(() => {\r\n        if (currentOpenFile && usernotes) {\r\n            setChipData(usernotes.find((e) => e.id === currentOpenFile).tags);\r\n        }\r\n        return () => {};\r\n    }, [currentOpenFile, usernotes]);\r\n\r\n    const updTag = (e) => {\r\n        setTag(e.target.value);\r\n    };\r\n\r\n    const handleDelete = async (chipToDelete) => {\r\n        try {\r\n            let chips = chipData.filter(\r\n                (data, index) => index !== chipToDelete\r\n            );\r\n            setChipData(chips);\r\n            let newnotes = [...usernotes];\r\n            newnotes\r\n                .find((e) => e.id === currentOpenFile)\r\n                .tags.splice(chipToDelete, 1);\r\n            setuserNotes(newnotes);\r\n            await deltag({\r\n                variables: {\r\n                    id: currentOpenFile,\r\n                    email: context.user.email,\r\n                    index: chipToDelete,\r\n                },\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    const newTag = async (e) => {\r\n        if (e.key === \"Enter\" && e.target.value !== \"\" && currentOpenFile) {\r\n            try {\r\n                if (chipData.includes(tag)) {\r\n                    setAnchorEle(document.body);\r\n                    return;\r\n                }\r\n                let newnotes = [...usernotes];\r\n                newnotes.find((e) => e.id === currentOpenFile).tags.push(tag);\r\n                setuserNotes(newnotes);\r\n                setChipData([...chipData, tag]);\r\n                await addtag({\r\n                    variables: {\r\n                        id: currentOpenFile,\r\n                        email: context.user.email,\r\n                        tag,\r\n                    },\r\n                });\r\n                setTag(\"\");\r\n                e.target.value = \"\";\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <CssBaseline />\r\n            <div className={classes.root}>\r\n                {chipData.map((data, index) => {\r\n                    return (\r\n                        <li key={index}>\r\n                            <Chip\r\n                                size=\"small\"\r\n                                label={data}\r\n                                onDelete={() => handleDelete(index)}\r\n                                className={classes.chip}\r\n                            />\r\n                        </li>\r\n                    );\r\n                })}\r\n                <input\r\n                    id=\"taginput\"\r\n                    className={classes.titlebar}\r\n                    placeholder=\"New tags\"\r\n                    onChange={updTag}\r\n                    onKeyDown={newTag}\r\n                />\r\n                <Popover\r\n                    id={id}\r\n                    open={open}\r\n                    anchorEl={anchorEle}\r\n                    onClose={handleClose}\r\n                    anchorOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                >\r\n                    <Alert className={classes.alert} severity=\"warning\">\r\n                        Tag Already Exists!\r\n                    </Alert>\r\n                </Popover>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const ADDNOTE_Mutation = gql`\r\n    mutation createNote(\r\n        $email: String!\r\n        $title: String!\r\n        $markdown: String!\r\n        $tags: [String]!\r\n        $links: [String]!\r\n    ) {\r\n        createNote(\r\n            data: {\r\n                email: $email\r\n                title: $title\r\n                markdown: $markdown\r\n                tags: $tags\r\n                links: $links\r\n            }\r\n        ) {\r\n            id\r\n            tags\r\n            title\r\n            markdown\r\n            links\r\n        }\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const DELNOTE_Mutation = gql`\r\n    mutation deleteNote($id: String!, $email: String!) {\r\n        deleteNote(id: $id, email: $email)\r\n    }\r\n`;\r\n","import { useReducer, useContext } from \"react\";\r\nimport { ADDNOTE_Mutation } from \"../../graphql/createNote\";\r\nimport { DELNOTE_Mutation } from \"../../graphql/deleteNote\";\r\nimport { UPDNOTE_Mutation } from \"../../graphql/updateNote\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nfunction actionReducer(state, action) {\r\n    let updOpenFiles = [];\r\n    let updCurrentOpenFile = \"\";\r\n\r\n    switch (action.type) {\r\n        case \"SET\":\r\n            return action.updData;\r\n        case \"NEW\":\r\n            return {\r\n                usernotes: [...state.usernotes, action.data],\r\n                openFiles: [...state.openFiles, action.id],\r\n                currentOpenFile: action.id,\r\n            };\r\n        case \"OPEN\":\r\n            if (action.id === \"root\") {\r\n                return state;\r\n            }\r\n            if (!state.openFiles.includes(action.id)) {\r\n                return {\r\n                    ...state,\r\n                    openFiles: [...state.openFiles, action.id],\r\n                    currentOpenFile: action.id,\r\n                };\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    currentOpenFile: action.id,\r\n                };\r\n            }\r\n        case \"RENAME\":\r\n            return {\r\n                ...state,\r\n                usernotes: action.data,\r\n            };\r\n        case \"DELETE\":\r\n            updCurrentOpenFile = state.currentOpenFile;\r\n            updOpenFiles = state.openFiles.filter((e) => e !== action.id);\r\n            if (action.id === state.currentOpenFile) {\r\n                let idx = state.openFiles.indexOf(state.currentOpenFile);\r\n                if (idx > 0) {\r\n                    updCurrentOpenFile = state.openFiles[idx - 1];\r\n                } else if (idx === 0 && state.openFiles.length > 1) {\r\n                    updCurrentOpenFile = state.openFiles[1];\r\n                } else {\r\n                    updCurrentOpenFile = \"\";\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                usernotes: action.data,\r\n                openFiles: updOpenFiles,\r\n                currentOpenFile: updCurrentOpenFile,\r\n            };\r\n        case \"CLOSE\":\r\n            updCurrentOpenFile = state.currentOpenFile;\r\n            updOpenFiles = state.openFiles.filter((e) => e !== action.id);\r\n            if (action.id === state.currentOpenFile) {\r\n                let idx = state.openFiles.indexOf(state.currentOpenFile);\r\n                if (idx > 0) {\r\n                    updCurrentOpenFile = state.openFiles[idx - 1];\r\n                } else if (idx === 0 && state.openFiles.length > 1) {\r\n                    updCurrentOpenFile = state.openFiles[1];\r\n                } else {\r\n                    updCurrentOpenFile = \"\";\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                openFiles: updOpenFiles,\r\n                currentOpenFile: updCurrentOpenFile,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction FileActions(initialState) {\r\n    const [state, dispatch] = useReducer(actionReducer, initialState);\r\n    const [newNote] = useMutation(ADDNOTE_Mutation);\r\n    const [delNote] = useMutation(DELNOTE_Mutation);\r\n    const [updNote] = useMutation(UPDNOTE_Mutation);\r\n    const {\r\n        user: { email },\r\n    } = useContext(AuthContext);\r\n\r\n    function setUserNotes(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                usernotes: data,\r\n            },\r\n        });\r\n    }\r\n    function setOpenFiles(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                openFiles: data,\r\n            },\r\n        });\r\n    }\r\n    function setCurrentOpenFile(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                currentOpenFile: data,\r\n            },\r\n        });\r\n    }\r\n    async function newFile(title) {\r\n        try {\r\n            const a = await newNote({\r\n                variables: {\r\n                    email,\r\n                    title,\r\n                    markdown: \"\",\r\n                    tags: [],\r\n                    links: [],\r\n                },\r\n            });\r\n            dispatch({\r\n                type: \"NEW\",\r\n                id: a.data.createNote.id,\r\n                data: a.data.createNote,\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n    function openFile(id) {\r\n        dispatch({\r\n            type: \"OPEN\",\r\n            id: id,\r\n        });\r\n    }\r\n    function saveFile(id, data) {\r\n        let newNotes = [...state.usernotes];\r\n        let idx = newNotes.findIndex((e) => e.id === id);\r\n        newNotes[idx] = data;\r\n        setUserNotes(newNotes);\r\n    }\r\n    function closeFile(id) {\r\n        dispatch({\r\n            type: \"CLOSE\",\r\n            id: id,\r\n        });\r\n    }\r\n    async function renameFile(id, title) {\r\n        try {\r\n            let data = [...state.usernotes];\r\n            data.find((e) => e.id === id).title = title;\r\n            dispatch({\r\n                type: \"RENAME\",\r\n                id,\r\n                data,\r\n            });\r\n            await updNote({ variables: { id, email, title } });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n    async function deleteFile(id) {\r\n        // TODO: delete file in backend, return new usernotes data\r\n        try {\r\n            let data = [...state.usernotes];\r\n            let idx = data.findIndex((e) => e.id === id);\r\n            data.splice(idx, 1);\r\n            console.log(id);\r\n            console.log(data);\r\n            dispatch({\r\n                type: \"DELETE\",\r\n                id,\r\n                data,\r\n            });\r\n            await delNote({ variables: { id, email } });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return {\r\n        usernotes: state.usernotes,\r\n        openFiles: state.openFiles,\r\n        currentOpenFile: state.currentOpenFile,\r\n        setuserNotes: setUserNotes,\r\n        setopenFiles: setOpenFiles,\r\n        setcurrentOpenFile: setCurrentOpenFile,\r\n        actions: {\r\n            new: newFile,\r\n            open: openFile,\r\n            save: saveFile,\r\n            close: closeFile,\r\n            rename: renameFile,\r\n            delete: deleteFile,\r\n        },\r\n    };\r\n}\r\n\r\nexport { FileActions };\r\n","import React from \"react\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nconst Example = ({ type, color }) => (\r\n    <ReactLoading type={type} color={color} height={180} width={180} />\r\n);\r\n\r\nexport default Example;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { NOTES_QUERY } from \"../../graphql/notes\";\r\nimport { AVATAR_QUERY } from \"../../graphql/getAvatar\";\r\nimport { GUIDE_QUERY } from \"../../graphql/noti\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nimport PersistentDrawerLeft from \"./LeftDrawer\";\r\nimport PersistentDrawerRight from \"./RightDrawer\";\r\nimport TagBar from \"./TagBar\";\r\n\r\nimport { FileActions } from \"./FileActions\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nimport Loading from \"../../routes/loading\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainGrid: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    pageContainer: {\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n}));\r\n\r\nexport default function Page_1_0() {\r\n    const classes = useStyles();\r\n    const {\r\n        user: { email, userId: id },\r\n    } = useContext(AuthContext);\r\n    const [mode, setMode] = useState(\"search\");\r\n    const [open, setOpen] = useState(false);\r\n    const [searchStr, setSearchStr] = useState(\"\");\r\n\r\n    const { loading, error, data } = useQuery(NOTES_QUERY, {\r\n        variables: { email },\r\n    });\r\n\r\n    const { loading: ava_loading, error: ava_error, data: ava_data } = useQuery(\r\n        AVATAR_QUERY,\r\n        {\r\n            variables: { id },\r\n        }\r\n    );\r\n    const [avatar, setAvatar] = useState(\"\");\r\n    useEffect(() => {\r\n        if (!ava_loading && !ava_error) {\r\n            setAvatar(ava_data.userAvatar);\r\n        }\r\n        return () => {};\r\n    }, [ava_loading]);\r\n\r\n    const {\r\n        loading: guide_loading,\r\n        error: guide_error,\r\n        data: guide_data,\r\n    } = useQuery(GUIDE_QUERY);\r\n    const [guide, setGuide] = useState(\"\");\r\n    useEffect(() => {\r\n        if (!guide_loading && !guide_error) {\r\n            setGuide(guide_data.user);\r\n        }\r\n        return () => {};\r\n    }, [guide_loading]);\r\n\r\n    const {\r\n        usernotes,\r\n        openFiles,\r\n        currentOpenFile,\r\n        setcurrentOpenFile,\r\n        setuserNotes,\r\n        setopenFiles,\r\n        actions,\r\n    } = FileActions({ usernotes: [], openFiles: [], currentOpenFile: \"\" });\r\n\r\n    useEffect(() => {\r\n        if (!loading && !error) {\r\n            setuserNotes(data.usernotes);\r\n        }\r\n    }, [loading, data, error]);\r\n\r\n    return loading || ava_loading || guide_loading ? (\r\n        <div\r\n            backgroundColor=\"blue\"\r\n            style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n            }}\r\n        >\r\n            <Loading type=\"spinningBubbles\" color=\"ffffff\" />\r\n        </div>\r\n    ) : (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <Container\r\n                maxWidth={false}\r\n                disableGutters={true}\r\n                className={classes.pageContainer}\r\n            >\r\n                <filecontext.Provider\r\n                    value={{\r\n                        usernotes,\r\n                        openFiles,\r\n                        currentOpenFile,\r\n                        setcurrentOpenFile,\r\n                        setuserNotes,\r\n                        setopenFiles,\r\n                        actions,\r\n                    }}\r\n                >\r\n                    <AvatarContext.Provider value={{ avatar, setAvatar }}>\r\n                        <Header />\r\n                    </AvatarContext.Provider>\r\n                    <mainContext.Provider\r\n                        value={{\r\n                            mode,\r\n                            setMode,\r\n                            open,\r\n                            setOpen,\r\n                            searchStr,\r\n                            setSearchStr,\r\n                            guide,\r\n                        }}\r\n                    >\r\n                        <main\r\n                            style={{\r\n                                display: \"flex\",\r\n                                flexGrow: 1,\r\n                                width: \"100vw\",\r\n                                alignItems: \"stretch\",\r\n                            }}\r\n                        >\r\n                            <PersistentDrawerLeft></PersistentDrawerLeft>\r\n                            <div\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    flex: \"1 1 0\",\r\n                                    minWidth: \"0px\",\r\n                                    overflowY: \"hidden\",\r\n                                }}\r\n                            >\r\n                                <div\r\n                                    style={{\r\n                                        display: \"flex\",\r\n                                        flexGrow: 1,\r\n                                        maxWidth: \"100%\",\r\n                                        minWidth: \"0px\",\r\n                                        flexDirection: \"column\",\r\n                                        alignItems: \"stretch\",\r\n                                    }}\r\n                                >\r\n                                    <Main></Main>\r\n                                    <TagBar></TagBar>\r\n                                </div>\r\n                            </div>\r\n                            <PersistentDrawerRight></PersistentDrawerRight>\r\n                        </main>\r\n                    </mainContext.Provider>\r\n                </filecontext.Provider>\r\n            </Container>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Switch } from \"react-router-dom\";\r\nimport SignIn from \"../components/SignIn\";\r\nimport SignUp from \"../components/SignUp\";\r\nimport AuthRoute from \"./authRoute\";\r\nimport ProtectRoute from \"./protectRoute\";\r\nimport Page_1_0 from \"../components/Page_1_0/Page_1_0\";\r\nfunction Routes() {\r\n    return (\r\n        <Switch>\r\n            <AuthRoute exact path=\"/\" component={SignIn} />\r\n            <AuthRoute exact path=\"/login\" component={SignIn} />\r\n            <AuthRoute exact path=\"/signup\" component={SignUp} />\r\n            <ProtectRoute exact path=\"/dashboard\" component={Page_1_0} />\r\n        </Switch>\r\n    );\r\n}\r\n\r\nexport default Routes;\r\n","import \"./App.css\";\r\nimport Routes from \"./routes/Routes\";\r\n\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { setAccessToken } from \"./accessToken\";\r\nimport { AuthContext } from \"./routes/auth\";\r\nimport decode from \"jwt-decode\";\r\nimport Loading from \"./routes/loading\";\r\n\r\nfunction App() {\r\n    const [loading, setLoading] = useState(true);\r\n    const context = useContext(AuthContext);\r\n    useEffect(() => {\r\n        fetch(\"/refresh_token\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        }).then(async (res) => {\r\n            const data = await res.json();\r\n            if (data.accessToken) {\r\n                setAccessToken(data.accessToken);\r\n                const { userId, name, email } = decode(data.accessToken);\r\n                if (!context.user)\r\n                    context.login({\r\n                        userId,\r\n                        name,\r\n                        email,\r\n                        accessToken: data.accessToken,\r\n                    });\r\n            } else console.log(\"no access Token, Please login\");\r\n            setLoading(false);\r\n        });\r\n    }, []);\r\n    return (\r\n        <div className=\"App\">\r\n            <Router>\r\n                {loading ? (\r\n                    <div\r\n                        backgroundColor=\"blue\"\r\n                        style={{\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            display: \"flex\",\r\n                            justifyContent: \"center\",\r\n                            alignItems: \"center\",\r\n                        }}\r\n                    >\r\n                        <Loading type=\"spinningBubbles\" color=\"ffffff\" />\r\n                    </div>\r\n                ) : (\r\n                    <Routes />\r\n                )}\r\n            </Router>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { ApolloClient, InMemoryCache } from \"apollo-boost\";\r\nimport { ApolloProvider } from \"@apollo/react-hooks\";\r\nimport { ApolloLink, Observable } from \"apollo-link\";\r\nimport { onError } from \"apollo-link-error\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\nimport { TokenRefreshLink } from \"apollo-link-token-refresh\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { AuthProvider } from \"./routes/auth\";\r\nimport { setAccessToken, getAccessToken } from \"./accessToken\";\r\n\r\n// Create an http link:\r\nconst httpLink = createUploadLink({\r\n    uri: \"/graphql\",\r\n    credentials: \"include\",\r\n});\r\n\r\nconst requestLink = new ApolloLink(\r\n    (operation, forward) =>\r\n        new Observable((observer) => {\r\n            let handle;\r\n            Promise.resolve(operation)\r\n                .then((operation) => {\r\n                    const accessToken = getAccessToken();\r\n                    if (accessToken) {\r\n                        operation.setContext({\r\n                            headers: {\r\n                                authorization: `bearer ${accessToken}`,\r\n                            },\r\n                        });\r\n                    }\r\n                })\r\n                .then(() => {\r\n                    handle = forward(operation).subscribe({\r\n                        next: observer.next.bind(observer),\r\n                        error: observer.error.bind(observer),\r\n                        complete: observer.complete.bind(observer),\r\n                    });\r\n                })\r\n                .catch(observer.error.bind(observer));\r\n\r\n            return () => {\r\n                if (handle) handle.unsubscribe();\r\n            };\r\n        })\r\n);\r\n\r\nconst RefreshLink = new TokenRefreshLink({\r\n    accessTokenField: \"accessToken\",\r\n    isTokenValidOrUndefined: () => {\r\n        const token = getAccessToken();\r\n        if (!token) {\r\n            return true;\r\n        }\r\n\r\n        try {\r\n            const { exp } = jwtDecode(token);\r\n            if (Date.now() >= exp * 1000) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        } catch {\r\n            return false;\r\n        }\r\n    },\r\n    fetchAccessToken: () => {\r\n        return fetch(\"/refresh_token\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        });\r\n    },\r\n    handleFetch: (accessToken) => {\r\n        console.log(accessToken);\r\n        setAccessToken(accessToken);\r\n    },\r\n    handleError: (err) => {\r\n        console.warn(\"Your refresh token is invalid. Try to relogin\");\r\n        console.error(err);\r\n    },\r\n});\r\n\r\nconst errorLink = onError(({ graphQLErrors, networkError, errorMessage }) => {\r\n    console.log(graphQLErrors);\r\n    console.log(networkError);\r\n});\r\n\r\nconst client = new ApolloClient({\r\n    link: ApolloLink.from([RefreshLink, errorLink, requestLink, httpLink]),\r\n    cache: new InMemoryCache().restore({}),\r\n});\r\n\r\nconst wrappedApp = (\r\n    <ApolloProvider client={client}>\r\n        <AuthProvider>\r\n            <App />\r\n        </AuthProvider>\r\n    </ApolloProvider>\r\n);\r\n\r\nReactDOM.render(wrappedApp, document.getElementById(\"root\"));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}