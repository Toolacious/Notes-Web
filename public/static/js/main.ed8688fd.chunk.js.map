{"version":3,"sources":["icons/icon.jpg","graphql/login.js","accessToken.js","routes/auth.js","icons/login.jpg","components/SignIn.js","graphql/mutations.js","icons/signup.jpg","components/SignUp.js","routes/authRoute.js","routes/protectRoute.js","components/Page_1_0/MenuItem.js","graphql/logout.js","graphql/upload.js","context/avatarContext.js","components/Page_1_0/UploadDialog.js","components/Page_1_0/AccountDialog.js","context/filetree.js","components/Page_1_0/NewDialog.js","icons/avatar.jpg","icons/title.jpg","components/Page_1_0/Header.js","components/Page_1_0/SaveDialog.js","components/Page_1_0/Markdown.js","graphql/updateNote.js","context/mainContext.js","components/Page_1_0/Main.js","graphql/notes.js","graphql/getAvatar.js","graphql/noti.js","components/Page_1_0/SearchBox.js","components/Page_1_0/RenameDialog.js","components/Page_1_0/DeleteDialog.js","components/Page_1_0/TreeMenuItem.js","components/Page_1_0/FolderTree.js","components/Page_1_0/LeftDrawer.js","components/Page_1_0/RightDrawer.js","graphql/addTag.js","graphql/delTag.js","components/Page_1_0/TagBar.js","graphql/createNote.js","graphql/deleteNote.js","components/Page_1_0/FileActions.js","routes/loading.js","components/Page_1_0/Page_1_0.js","routes/Routes.js","App.js","reportWebVitals.js","index.js"],"names":["LOGIN_Mutation","gql","accessToken","setAccessToken","s","getAccessToken","initialState","user","decodedToken","jwtDecode","AuthContext","createContext","login","userData","logout","authReducer","state","action","type","payload","AuthProvider","props","useReducer","dispatch","Provider","value","Copyright","Typography","variant","color","align","to","Date","getFullYear","useStyles","makeStyles","theme","root","height","image","backgroundImage","loginImg","backgroundRepeat","backgroundColor","palette","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","SignIn","context","useContext","classes","useMutation","loading","error","useState","loginErr","setloginErr","history","useHistory","validationSchema","Yup","email","required","password","min","formik","useFormik","initialValues","onSubmit","values","a","variables","response","data","push","console","log","message","slice","Grid","container","component","className","CssBaseline","item","xs","sm","md","Paper","elevation","square","Avatar","src","LockOutlinedIcon","handleSubmit","noValidate","TextField","fullWidth","id","label","name","autoComplete","autoFocus","onChange","handleChange","touched","Boolean","errors","helperText","Button","disabled","isSubmitting","Box","mt","CREATE_USER_MUTATION","padding","borderRadius","space","SignUp","fname","max","lname","confirmPassword","oneOf","addUser","regiErr","setRegiErr","style","Container","maxWidth","justify","AuthRoute","Component","rest","render","ProtectRoute","menubarButton","fontSize","paddingTop","paddingBottom","paddingLeft","paddingRight","flexShrink","textTransform","menuItem","disabledMenuItem","cursor","SimpleMenu","menu","sections","React","anchorEl","setAnchorEl","aria-controls","aria-haspopup","onClick","event","currentTarget","onKeyDown","e","key","preventDefault","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","open","onClose","map","section","MenuItem","clsx","document","getElementById","func","LOGOUT_Mutation","UPLOAD_Mutation","AvatarContext","String","setAvatar","canvas","crop","upload","url","toDataURL","picture","dialogButtonWrapper","flexGrow","dialogButton","textAlign","dialog","input","UploadDialog","userId","upImg","setUpImg","imgRef","useRef","previewCanvasRef","aspect","setCrop","completedCrop","setCompletedCrop","onLoad","useCallback","img","current","useEffect","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","pixelRatio","window","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","Dialog","aria-labelledby","DialogTitle","onImageLoaded","c","onComplete","circularCrop","maxHeight","overflow","ref","Math","round","DialogActions","accept","target","files","length","reader","FileReader","addEventListener","result","readAsDataURL","htmlFor","generateDownload","headerAvatar","marginLeft","marginRight","headerAvatarWrapper","justifyContent","avatarWrapper","marginBottom","SimpleDialog","onOpen","selectedValue","avatar_src","alt","AccountDialog","setOpen","uploadOpen","setUploadOpen","setSelectedValue","handleClickOpen","handleClose","filecontext","usernotes","openFiles","currentOpenFile","setcurrentOpenFile","setuserNotes","setopenFiles","actions","RenameDialog","title","setTitle","valid","setValid","helper","setHelper","handleCreate","findIndex","notes","new","closeFunc","DialogContent","handleTitle","val","headerWrapper","flexWrap","borderBottom","divider","zIndex","drawer","icon","mainWrapper","titlebar","border","titleImg","objectFit","menubar","minHeight","overflowX","Header","openNewDialog","setOpenNewDialog","file_menu","saveButton","click","Fragment","Toolbar","IconButton","SaveDialog","updFunc","Markdown","escapeHtml","plugins","gfm","singleTilde","RemarkMathPlugin","renderers","code","language","vscDarkPlus","children","math","inlineMath","_mapProps","UPDNOTE_Mutation","mainContext","mode","setMode","searchStr","setSearchStr","guide","pageBar","listStyle","overflowY","chip","borderRight","chipRoot","transform","hover","chipText","textOverflow","chipFocus","markdown","mainWindowWrapper","position","mainWindow","viewWindow","modeButtonWrapper","top","right","nopad","inputStyle","resize","outline","outputStyle","Main","updNote","useTheme","pageNum","setPageNum","pages","setPages","openDialog","setOpenDialog","dialogFunctions","setDialogFunctions","fileID","node","addPage","Object","assign","unsaved","find","chipToDelete","includes","updPages","filter","index","handleDelete","indexOf","save","close","handleMode","updMode","currentPageIndex","tags","regex","str","links","g","exec","lastIndex","forEach","match","groupIndex","newPages","Chip","size","disableRipple","getElementsByClassName","focus","onDelete","Divider","orientation","handleContentData","NOTES_QUERY","AVATAR_QUERY","GUIDE_QUERY","borderColor","text","primary","linksIOTitle","SearchBox","tagItem","setTagItem","titleItem","setTitleItem","mdItem","setMdItem","openTitle","setOpenTitle","openMd","setOpenMd","alltags","ele","titlefiles","mdfiles","placeholder","List","disablePadding","obj","ListItem","button","ListItemText","handleRename","rename","DeleteDialog","delete","labelIcon","labelText","fontWeight","whiteSpace","TreeMenu","openRenameDialog","setOpenRenameDialog","openDeleteDialog","setOpenDeleteDialog","handleClick","onContextMenu","colorWhite1","FolderTree","renderTree","TreeItem","nodeId","Array","isArray","child","TreeView","defaultCollapseIcon","defaultExpanded","defaultExpandIcon","sidebarWrapper","rootShift","transition","transitions","create","easing","easeOut","duration","enteringScreen","drawerPaperWrapper","drawerPaper","bottom","PersistentDrawerLeft","graphMode","setGraph","aria-label","Drawer","anchor","docked","borderLeft","drawerButton","PersistentDrawerRight","r_open","setr_open","r_mode","setr_Mode","inlinks","setInLink","outlinks","setOutLink","openIn","setOpenIn","openOut","setOpenOut","inLinks","outLinks","tmp","keys","entries","setTag","setShowingItem","handleLink","tag","ADDTAG_Mutation","DELTAG_Mutation","alert","TagBar","anchorEle","setAnchorEle","setTimeout","undefined","addtag","deltag","chipData","setChipData","chips","newnotes","splice","newTag","body","Popover","Alert","severity","ADDNOTE_Mutation","DELNOTE_Mutation","actionReducer","updOpenFiles","updCurrentOpenFile","updData","idx","Example","mainGrid","pageContainer","Page_1_0","useQuery","ava_loading","ava_error","ava_data","userAvatar","guide_loading","guide_error","guide_data","setGuide","newNote","delNote","setUserNotes","createNote","newNotes","FileActions","disableGutters","flex","minWidth","Routes","exact","path","App","setLoading","fetch","method","credentials","then","res","json","decode","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","httpLink","createUploadLink","uri","requestLink","ApolloLink","operation","forward","Observable","observer","handle","Promise","resolve","setContext","headers","authorization","subscribe","next","bind","complete","catch","unsubscribe","RefreshLink","TokenRefreshLink","accessTokenField","isTokenValidOrUndefined","token","exp","now","fetchAccessToken","handleFetch","handleError","err","warn","errorLink","onError","graphQLErrors","networkError","errorMessage","client","ApolloClient","link","from","cache","InMemoryCache","restore","wrappedApp","ReactDOM"],"mappings":"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","file":"static/js/main.ed8688fd.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/icon.e44a45f6.jpg\";","import { gql } from \"apollo-boost\";\r\n\r\nexport const LOGIN_Mutation = gql`\r\n    mutation login($email: String!, $password: String!) {\r\n        login(data: { email: $email, password: $password }) {\r\n            userId\r\n            name\r\n            email\r\n            accessToken\r\n        }\r\n    }\r\n`;\r\n","let accessToken = \"\";\r\n\r\nexport const setAccessToken = (s) => {\r\n    accessToken = s;\r\n};\r\n\r\nexport const getAccessToken = () => {\r\n    return accessToken;\r\n};\r\n","import React, { useReducer, createContext } from \"react\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { getAccessToken } from \"../accessToken\";\r\n\r\nconst initialState = {\r\n    user: null,\r\n};\r\n\r\nif (getAccessToken()) {\r\n    const decodedToken = jwtDecode(getAccessToken());\r\n    initialState.user = decodedToken;\r\n}\r\n\r\nconst AuthContext = createContext({\r\n    user: null,\r\n    login: (userData) => {},\r\n    logout: () => {},\r\n});\r\n\r\nfunction authReducer(state, action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return {\r\n                ...state,\r\n                user: action.payload,\r\n            };\r\n        case \"LOGOUT\":\r\n            return {\r\n                ...state,\r\n                user: null,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction AuthProvider(props) {\r\n    const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n    function login(userData) {\r\n        //localStorage.setItem(\"jwtToken\", userData.token);\r\n        dispatch({\r\n            type: \"LOGIN\",\r\n            payload: userData,\r\n        });\r\n    }\r\n\r\n    function logout() {\r\n        //localStorage.removeItem(\"jwtToken\");\r\n        dispatch({ type: \"LOGOUT\" });\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{ user: state.user, login, logout }}\r\n            {...props}\r\n        />\r\n    );\r\n}\r\n\r\nexport { AuthContext, AuthProvider };\r\n","export default __webpack_public_path__ + \"static/media/login.71966ff7.jpg\";","import React, { useState, useContext } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import Link from \"@material-ui/core/Link\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"../icons/icon.jpg\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { LOGIN_Mutation } from \"../graphql/login\";\r\nimport { AuthContext } from \"../routes/auth\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport loginImg from \"../icons/login.jpg\";\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {\"Copyright © \"}\r\n            <Link color=\"inherit\" to=\"https://material-ui.com/\">\r\n                Abyss Notes\r\n            </Link>{\" \"}\r\n            {new Date().getFullYear()}\r\n            {\".\"}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: \"100vh\",\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${loginImg})`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundColor:\r\n            theme.palette.type === \"light\"\r\n                ? theme.palette.grey[50]\r\n                : theme.palette.grey[900],\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n    },\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nexport default function SignIn() {\r\n    const context = useContext(AuthContext);\r\n    const classes = useStyles();\r\n    const [login, { loading, error }] = useMutation(LOGIN_Mutation);\r\n    const [loginErr, setloginErr] = useState(\"\");\r\n    const history = useHistory();\r\n    const validationSchema = Yup.object({\r\n        email: Yup.string(\"Enter your email\")\r\n            .email(\"Enter a valid email\")\r\n            .required(\"Email is required\"),\r\n        password: Yup.string(\"\")\r\n            .min(6, \"Password must contain at least 6 characters\")\r\n            .required(\"Enter your password\"),\r\n    });\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: \"\",\r\n            password: \"\",\r\n        },\r\n        validationSchema,\r\n        onSubmit: async (values) => {\r\n            try {\r\n                const { email, password } = values;\r\n                const response = await login({\r\n                    variables: {\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                if (response && response.data) {\r\n                    setAccessToken(response.data.login.accessToken);\r\n                }\r\n                context.login(response.data.login);\r\n                history.push(\"/dashboard\");\r\n            } catch (err) {\r\n                console.log(err.message);\r\n                setloginErr(err.message.slice(15));\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <Grid container component=\"main\" className={classes.root}>\r\n            <CssBaseline />\r\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\r\n            <Grid\r\n                item\r\n                xs={12}\r\n                sm={8}\r\n                md={5}\r\n                component={Paper}\r\n                elevation={6}\r\n                square\r\n            >\r\n                <div className={classes.paper}>\r\n                    <Avatar\r\n                        className={classes.avatar}\r\n                        src={LockOutlinedIcon}\r\n                    ></Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Sign in\r\n                    </Typography>\r\n                    <form\r\n                        className={classes.form}\r\n                        onSubmit={formik.handleSubmit}\r\n                        noValidate\r\n                    >\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"email\"\r\n                            label=\"Email Address\"\r\n                            name=\"email\"\r\n                            autoComplete=\"email\"\r\n                            autoFocus\r\n                            value={formik.values.email}\r\n                            onChange={formik.handleChange}\r\n                            error={\r\n                                (formik.touched.email &&\r\n                                    Boolean(formik.errors.email)) ||\r\n                                loginErr[0] === \"E\" ||\r\n                                loginErr[1] === \"e\"\r\n                            }\r\n                            helperText={\r\n                                (formik.touched.email && formik.errors.email) ||\r\n                                (loginErr[0] === \"E\" || loginErr[1] === \"e\"\r\n                                    ? loginErr\r\n                                    : null)\r\n                            }\r\n                        />\r\n\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                            onChange={formik.handleChange}\r\n                            error={\r\n                                (formik.touched.password &&\r\n                                    Boolean(formik.errors.password)) ||\r\n                                loginErr[0] === \"P\"\r\n                            }\r\n                            helperText={\r\n                                (formik.touched.password &&\r\n                                    formik.errors.password) ||\r\n                                (loginErr[0] === \"P\" ? loginErr : null)\r\n                            }\r\n                        />\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            disabled={formik.isSubmitting}\r\n                        >\r\n                            Sign In\r\n                        </Button>\r\n                        <Grid container>\r\n                            <Grid item xs>\r\n                                <Link to=\"/signup\" variant=\"body2\">\r\n                                    {\"Don't have an account? Sign Up\"}\r\n                                </Link>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box mt={5}>\r\n                            <Copyright />\r\n                        </Box>\r\n                    </form>\r\n                </div>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const CREATE_USER_MUTATION = gql`\r\n    mutation createUser(\r\n        $fname: String!\r\n        $lname: String!\r\n        $name: String!\r\n        $email: String!\r\n        $password: String!\r\n    ) {\r\n        createUser(\r\n            data: {\r\n                fname: $fname\r\n                lname: $lname\r\n                name: $name\r\n                email: $email\r\n                password: $password\r\n            }\r\n        ) {\r\n            id\r\n            name\r\n            password\r\n        }\r\n    }\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/signup.e3594763.jpg\";","import React, { useContext, useState } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import Link from \"@material-ui/core/Link\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"../icons/icon.jpg\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { CREATE_USER_MUTATION } from \"../graphql/mutations\";\r\nimport { LOGIN_Mutation } from \"../graphql/login\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport loginImg from \"../icons/signup.jpg\";\r\nimport { AuthContext } from \"../routes/auth\";\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {\"Copyright © \"}\r\n            <Link color=\"inherit\" to=\"https://material-ui.com/\">\r\n                Abyss Notes\r\n            </Link>{\" \"}\r\n            {new Date().getFullYear()}\r\n            {\".\"}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        backgroundColor: \"white\",\r\n        padding: theme.spacing(2),\r\n        borderRadius: \"20px\",\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${loginImg})`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundColor:\r\n            theme.palette.type === \"light\"\r\n                ? theme.palette.grey[50]\r\n                : theme.palette.grey[900],\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    space: {\r\n        height: theme.spacing(8),\r\n    },\r\n}));\r\n\r\nexport default function SignUp() {\r\n    const context = useContext(AuthContext);\r\n\r\n    const validationSchema = Yup.object({\r\n        fname: Yup.string(\"Enter your first name\")\r\n            .min(2, \"Fist name should be of minimum 2 characters length\")\r\n            .max(50)\r\n            .required(\"First name is required\"),\r\n        lname: Yup.string(\"Enter your last name\")\r\n            .min(2, \"Fist name should be of minimum 2 characters length\")\r\n            .required(\"Last name is required\"),\r\n        name: Yup.string(\"Enter a name\")\r\n            .min(6, \"Username should be of minimum 6 characters length\")\r\n            .required(\"Name is required\"),\r\n        email: Yup.string(\"Enter your email\")\r\n            .email(\"Enter a valid email\")\r\n            .required(\"Email is required\"),\r\n        password: Yup.string(\"\")\r\n            .min(6, \"Password must contain at least 6 characters\")\r\n            .required(\"Enter your password\"),\r\n        confirmPassword: Yup.string(\"Enter your password\")\r\n            .required(\"Confirm your password\")\r\n            .oneOf([Yup.ref(\"password\")], \"Password does not match\"),\r\n    });\r\n\r\n    const history = useHistory();\r\n    const [addUser] = useMutation(CREATE_USER_MUTATION);\r\n    const [regiErr, setRegiErr] = useState(\"\");\r\n    const [login, { loading }] = useMutation(LOGIN_Mutation);\r\n    const classes = useStyles();\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            fname: \"\",\r\n            lname: \"\",\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n        },\r\n        validationSchema,\r\n        onSubmit: async (values) => {\r\n            //alert(JSON.stringify(values, null, 2));\r\n            try {\r\n                const { fname, lname, name, email, password } = values;\r\n                await addUser({\r\n                    variables: {\r\n                        fname,\r\n                        lname,\r\n                        name,\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                const response = await login({\r\n                    variables: {\r\n                        email,\r\n                        password,\r\n                    },\r\n                });\r\n                if (response && response.data) {\r\n                    setAccessToken(response.data.login.accessToken);\r\n                }\r\n                context.login(response.data.login);\r\n                history.push(\"/dashboard\");\r\n            } catch (err) {\r\n                console.log(err.message);\r\n                setRegiErr(err.message.slice(15));\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div\r\n            style={{ width: \"100vw\", height: \"100vh\" }}\r\n            className={classes.image}\r\n        >\r\n            <Container\r\n                component=\"main\"\r\n                maxWidth=\"xs\"\r\n                style={{ height: \"100%\" }}\r\n            >\r\n                <CssBaseline />\r\n                <div className={classes.space}></div>\r\n                <div className={classes.paper}>\r\n                    <Avatar\r\n                        className={classes.avatar}\r\n                        src={LockOutlinedIcon}\r\n                    ></Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Sign up\r\n                    </Typography>\r\n                    <form\r\n                        className={classes.form}\r\n                        onSubmit={formik.handleSubmit}\r\n                        noValidate\r\n                    >\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    autoComplete=\"fname\"\r\n                                    name=\"fname\"\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"fname\"\r\n                                    label=\"First name\"\r\n                                    autoFocus\r\n                                    value={formik.values.fname}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.fname &&\r\n                                        Boolean(formik.errors.fname)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.fname &&\r\n                                        formik.errors.fname\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"lname\"\r\n                                    label=\"Last name\"\r\n                                    name=\"lname\"\r\n                                    autoComplete=\"lname\"\r\n                                    value={formik.values.lname}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.lname &&\r\n                                        Boolean(formik.errors.lname)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.lname &&\r\n                                        formik.errors.lname\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    autoComplete=\"username\"\r\n                                    name=\"name\"\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"name\"\r\n                                    label=\"Username\"\r\n                                    autoFocus\r\n                                    value={formik.values.name}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.name &&\r\n                                        Boolean(formik.errors.name)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.name &&\r\n                                        formik.errors.name\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"email\"\r\n                                    label=\"Email Address\"\r\n                                    name=\"email\"\r\n                                    autoComplete=\"email\"\r\n                                    value={formik.values.email}\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        (formik.touched.email &&\r\n                                            Boolean(formik.errors.email)) ||\r\n                                        regiErr !== \"\"\r\n                                    }\r\n                                    helperText={\r\n                                        (formik.touched.email &&\r\n                                            formik.errors.email) ||\r\n                                        regiErr\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.password &&\r\n                                        Boolean(formik.errors.password)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.password &&\r\n                                        formik.errors.password\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"confirmPassword\"\r\n                                    label=\"Confirm Password\"\r\n                                    type=\"password\"\r\n                                    id=\"confirmPassword\"\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={formik.handleChange}\r\n                                    error={\r\n                                        formik.touched.confirmPassword &&\r\n                                        Boolean(formik.errors.confirmPassword)\r\n                                    }\r\n                                    helperText={\r\n                                        formik.touched.confirmPassword &&\r\n                                        formik.errors.confirmPassword\r\n                                    }\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                            disabled={formik.isSubmitting}\r\n                        >\r\n                            Sign Up\r\n                        </Button>\r\n                        <Grid container justify=\"flex-end\">\r\n                            <Grid item xs>\r\n                                <Link to=\"/login\" variant=\"body2\">\r\n                                    Already have an account? Sign in\r\n                                </Link>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </form>\r\n                </div>\r\n                <Box mt={5}>\r\n                    <Copyright />\r\n                </Box>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"./auth\";\r\n\r\nfunction AuthRoute({ component: Component, ...rest }) {\r\n    const { user } = useContext(AuthContext);\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                user ? <Redirect to=\"/dashboard\" /> : <Component {...props} />\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default AuthRoute;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"./auth\";\r\n\r\nfunction ProtectRoute({ component: Component, ...rest }) {\r\n    const { user } = useContext(AuthContext);\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                user ? <Component {...props} /> : <Redirect to=\"/\" />\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default ProtectRoute;\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    menubarButton: {\r\n        fontSize: \"14px\",\r\n        paddingTop: \"0px\",\r\n        paddingBottom: \"0px\",\r\n        paddingLeft: theme.spacing(1),\r\n        paddingRight: theme.spacing(1),\r\n        flexShrink: 0,\r\n\r\n        textTransform: \"none\",\r\n    },\r\n    menuItem: {\r\n        fontSize: \"14px\",\r\n        width: \"128px\",\r\n    },\r\n    disabledMenuItem: {\r\n        cursor: \"default\",\r\n        color: \"rgb(180, 180, 180)!important\",\r\n        backgroundColor: \"white!important\",\r\n    },\r\n}));\r\n\r\nexport default function SimpleMenu(props) {\r\n    const classes = useStyles();\r\n    const { name, sections } = props.menu;\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button\r\n                className={classes.menubarButton}\r\n                aria-controls=\"name\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleClick}\r\n                onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\") {\r\n                        e.preventDefault();\r\n                    }\r\n                }}\r\n            >\r\n                {name}\r\n            </Button>\r\n            <Menu\r\n                id=\"name\"\r\n                anchorEl={anchorEl}\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={() => {\r\n                    setAnchorEl(null);\r\n                }}\r\n            >\r\n                {sections.map((section) => (\r\n                    <MenuItem\r\n                        className={clsx(classes.menuItem, {\r\n                            [classes.disabledMenuItem]:\r\n                                section.name === \"Save\" &&\r\n                                !document.getElementById(\"saveMain\"),\r\n                        })}\r\n                        onClick={() => {\r\n                            section.func();\r\n                            setAnchorEl(null);\r\n                        }}\r\n                    >\r\n                        {section.name}\r\n                    </MenuItem>\r\n                ))}\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const LOGOUT_Mutation = gql`\r\n    mutation {\r\n        logout\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const UPLOAD_Mutation = gql`\r\n    mutation upload($id: String!, $picture: String!) {\r\n        upload(id: $id, picture: $picture)\r\n    }\r\n`;\r\n","import { createContext } from \"react\";\r\n\r\nconst AvatarContext = createContext({\r\n    avatar: String,\r\n    setAvatar: () => {},\r\n});\r\n\r\nexport { AvatarContext };\r\n","import React, {\r\n    useState,\r\n    useCallback,\r\n    useRef,\r\n    useEffect,\r\n    useContext,\r\n} from \"react\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UPLOAD_Mutation } from \"../../graphql/upload\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\n\r\nasync function generateDownload(canvas, crop, upload, id, setAvatar) {\r\n    try {\r\n        if (!crop || !canvas) {\r\n            return;\r\n        }\r\n        let url = canvas.toDataURL(\"image/png\");\r\n        await upload({\r\n            variables: {\r\n                id,\r\n                picture: url,\r\n            },\r\n        });\r\n        setAvatar(url);\r\n    } catch (err) {\r\n        console.log(err);\r\n        return err;\r\n    }\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: \"60vw\",\r\n        height: \"60vh\",\r\n        padding: theme.spacing(0, 3),\r\n    },\r\n    dialogButtonWrapper: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        flexGrow: 1,\r\n    },\r\n    dialogButton: {\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n        textAlign: \"center\",\r\n    },\r\n    dialog: {},\r\n    input: {\r\n        display: \"none\",\r\n    },\r\n}));\r\n\r\nexport default function UploadDialog(props) {\r\n    const classes = useStyles();\r\n    const { onClose, open } = props;\r\n\r\n    const {\r\n        user: { userId: id },\r\n    } = useContext(AuthContext);\r\n    const { setAvatar } = useContext(AvatarContext);\r\n    const [upload] = useMutation(UPLOAD_Mutation);\r\n    const [upImg, setUpImg] = useState();\r\n    const imgRef = useRef(null);\r\n    const previewCanvasRef = useRef(null);\r\n    const [crop, setCrop] = useState({\r\n        width: 50,\r\n        height: 50,\r\n        aspect: 1 / 1,\r\n    });\r\n    const [completedCrop, setCompletedCrop] = useState(null);\r\n\r\n    const onSelectFile = (e) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", () => setUpImg(reader.result));\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const onLoad = useCallback((img) => {\r\n        imgRef.current = img;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!completedCrop || !previewCanvasRef.current || !imgRef.current) {\r\n            return;\r\n        }\r\n\r\n        const image = imgRef.current;\r\n        const canvas = previewCanvasRef.current;\r\n        const crop = completedCrop;\r\n\r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext(\"2d\");\r\n        const pixelRatio = window.devicePixelRatio;\r\n\r\n        canvas.width = crop.width * pixelRatio;\r\n        canvas.height = crop.height * pixelRatio;\r\n\r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = \"high\";\r\n\r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            crop.width,\r\n            crop.height\r\n        );\r\n    }, [completedCrop]);\r\n\r\n    return (\r\n        <Dialog\r\n            maxWidth=\"xl\"\r\n            open={open}\r\n            onClose={onClose}\r\n            aria-labelledby=\"avatarUpload\"\r\n        >\r\n            <DialogTitle id=\"avatarUpload\">Upload Avatar</DialogTitle>\r\n            <div className={classes.root}>\r\n                <ReactCrop\r\n                    src={upImg}\r\n                    onImageLoaded={onLoad}\r\n                    crop={crop}\r\n                    onChange={(c) => setCrop(c)}\r\n                    onComplete={(c) => setCompletedCrop(c)}\r\n                    circularCrop\r\n                    style={{\r\n                        maxHeight: \"100%\",\r\n                        maxWidth: \"100%\",\r\n                        overflow: \"auto\",\r\n                    }}\r\n                />\r\n                <div>\r\n                    <canvas\r\n                        ref={previewCanvasRef}\r\n                        // Rounding is important so the canvas width and height matches/is a multiple for sharpness.\r\n                        style={{\r\n                            width: Math.round(completedCrop?.width ?? 0),\r\n                            height: Math.round(completedCrop?.height ?? 0),\r\n                            display: \"none\",\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <DialogActions>\r\n                <input\r\n                    accept=\"image/*\"\r\n                    className={classes.input}\r\n                    id=\"contained-button-file\"\r\n                    type=\"file\"\r\n                    onChange={onSelectFile}\r\n                />\r\n                <label\r\n                    htmlFor=\"contained-button-file\"\r\n                    className={classes.dialogButtonWrapper}\r\n                >\r\n                    <Button\r\n                        className={classes.dialogButton}\r\n                        onClick={() => {}}\r\n                        color=\"primary\"\r\n                        component=\"span\"\r\n                    >\r\n                        Upload\r\n                    </Button>\r\n                </label>\r\n                <div className={classes.dialogButtonWrapper}>\r\n                    <Button\r\n                        className={classes.dialogButton}\r\n                        disabled={\r\n                            !completedCrop?.width || !completedCrop?.height\r\n                        }\r\n                        onClick={() => {\r\n                            generateDownload(\r\n                                previewCanvasRef.current,\r\n                                completedCrop,\r\n                                upload,\r\n                                id,\r\n                                setAvatar\r\n                            );\r\n                            onClose();\r\n                        }}\r\n                        color=\"primary\"\r\n                    >\r\n                        Save\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { LOGOUT_Mutation } from \"../../graphql/logout\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { getAccessToken, setAccessToken } from \"../../accessToken\";\r\n\r\nimport UploadDialog from \"./UploadDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    avatar: {\r\n        height: \"128px\",\r\n        width: \"128px\",\r\n        borderRadius: \"50%\",\r\n    },\r\n    headerAvatar: {\r\n        height: \"48px\",\r\n        width: \"48px\",\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        borderRadius: \"50%\",\r\n    },\r\n    headerAvatarWrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n    avatarWrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nfunction SimpleDialog(props) {\r\n    const classes = useStyles();\r\n    const context = useContext(AuthContext);\r\n    const history = useHistory();\r\n    const [logout] = useMutation(LOGOUT_Mutation);\r\n\r\n    const { onClose, onOpen, selectedValue, open, avatar_src } = props;\r\n\r\n    const handleClose = () => {\r\n        onClose(selectedValue);\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            className={classes.dialog}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"account-dialog-title\"\r\n            open={open}\r\n        >\r\n            <DialogTitle id=\"account-dialog-title\">Account</DialogTitle>\r\n            <div className={classes.avatarWrapper}>\r\n                <img\r\n                    className={classes.avatar}\r\n                    src={avatar_src}\r\n                    alt=\"avatar\"\r\n                ></img>\r\n            </div>\r\n            <Button onClick={onOpen} className={classes.dialogButton}>\r\n                Change avatar\r\n            </Button>\r\n            <Button\r\n                className={classes.dialogButton}\r\n                onClick={async (e) => {\r\n                    e.preventDefault();\r\n                    await logout();\r\n                    setAccessToken(\"\");\r\n                    if (!getAccessToken()) {\r\n                        history.push(\"/\");\r\n                        context.logout();\r\n                    }\r\n                }}\r\n            >\r\n                Log out\r\n            </Button>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\nexport default function AccountDialog(props) {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [uploadOpen, setUploadOpen] = React.useState(false);\r\n    const [selectedValue, setSelectedValue] = React.useState(0);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = (value) => {\r\n        setOpen(false);\r\n        setSelectedValue(value);\r\n    };\r\n\r\n    const handleUploadClose = () => {\r\n        setUploadOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.headerAvatarWrapper}>\r\n            <img\r\n                className={classes.headerAvatar}\r\n                src={props.src}\r\n                alt=\"#\"\r\n                onClick={handleClickOpen}\r\n            />\r\n            <SimpleDialog\r\n                selectedValue={selectedValue}\r\n                open={open}\r\n                onClose={handleClose}\r\n                onOpen={() => {\r\n                    handleClose();\r\n                    setUploadOpen(true);\r\n                }}\r\n                avatar_src={props.src}\r\n            />\r\n            <UploadDialog\r\n                open={uploadOpen}\r\n                onClose={() => {\r\n                    handleUploadClose();\r\n                    handleClickOpen();\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { createContext } from \"react\";\r\n\r\nconst filecontext = createContext({\r\n  usernotes: [],\r\n  openFiles: [],\r\n  currentOpenFile: \"\",\r\n  setcurrentOpenFile: (data) => {},\r\n  setuserNotes: (data) => {},\r\n  setopenFiles: (data) => {},\r\n  actions: null,\r\n});\r\n\r\nexport { filecontext };\r\n","import React, { useContext } from \"react\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function RenameDialog(props) {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const [title, setTitle] = React.useState(\"\");\r\n    const [valid, setValid] = React.useState(true);\r\n    const [helper, setHelper] = React.useState(\"\");\r\n\r\n    const handleTitle = (val) => {\r\n        setTitle(val);\r\n        setValid(true);\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        // check title validity\r\n        if (!title) {\r\n            setValid(false);\r\n            setHelper(\"empty name!\");\r\n            return;\r\n        }\r\n        if (usernotes.findIndex((notes) => notes.title === title) !== -1) {\r\n            setValid(false);\r\n            setHelper(\"name existed!\");\r\n            return;\r\n        }\r\n        actions.new(title);\r\n        props.closeFunc();\r\n    };\r\n\r\n    return (\r\n        <Dialog open={true} aria-labelledby=\"name-dialog-title\">\r\n            <DialogTitle id=\"name-dialog-title\">File name</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    error={!valid}\r\n                    helperText={!valid ? helper : \"\"}\r\n                    margin=\"dense\"\r\n                    id=\"createBox\"\r\n                    label=\"new name\"\r\n                    fullWidth\r\n                    onChange={(e) => handleTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                            e.preventDefault();\r\n                            handleCreate();\r\n                        }\r\n                    }}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.closeFunc} color=\"primary\">\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={handleCreate} color=\"primary\">\r\n                    OK\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/avatar.dae53026.jpg\";","export default __webpack_public_path__ + \"static/media/title.b86a37ea.jpg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport SimpleMenu from \"./MenuItem\";\r\nimport AccountDialog from \"./AccountDialog\";\r\nimport NewDialog from \"./NewDialog\";\r\nimport icon from \"../../icons/icon.jpg\";\r\nimport user from \"../../icons/avatar.jpg\";\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\nimport titleImg from \"../../icons/title.jpg\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    headerWrapper: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        flexWrap: \"nowrap\",\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    icon: {\r\n        height: \"48px\",\r\n        width: \"48px\",\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        borderRadius: \"50%\",\r\n    },\r\n    mainWrapper: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexGrow: 1,\r\n    },\r\n    titlebar: {\r\n        fontSize: \"20px\",\r\n        height: \"48px\",\r\n        border: \"1px transparent\",\r\n    },\r\n    titleImg: {\r\n        maxHeight: \"48px\",\r\n        objectFit: \"contain\",\r\n    },\r\n    menubar: {\r\n        minHeight: \"0px\",\r\n        padding: \"0px\",\r\n        overflowX: \"auto\",\r\n    },\r\n}));\r\n\r\nexport default function Header() {\r\n    const classes = useStyles();\r\n    const [openNewDialog, setOpenNewDialog] = React.useState(false);\r\n    const { avatar } = useContext(AvatarContext);\r\n\r\n    const file_menu = {\r\n        name: \"File\",\r\n        sections: [\r\n            {\r\n                name: \"New\",\r\n                func: () => {\r\n                    setOpenNewDialog(true);\r\n                },\r\n            },\r\n            {\r\n                name: \"Save\",\r\n                func: () => {\r\n                    let saveButton = document.getElementById(\"saveMain\");\r\n                    if (saveButton) {\r\n                        saveButton.click();\r\n                    }\r\n                },\r\n            },\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.headerWrapper}>\r\n                <img className={classes.icon} src={icon} alt=\"#\" />\r\n                <Box className={classes.mainWrapper}>\r\n                    <div className={classes.titlebar}>\r\n                        <img src={titleImg} className={classes.titleImg} />\r\n                    </div>\r\n                    <Toolbar\r\n                        component=\"nav\"\r\n                        variant=\"dense\"\r\n                        className={classes.menubar}\r\n                    >\r\n                        <SimpleMenu menu={file_menu}></SimpleMenu>\r\n                        {openNewDialog ? (\r\n                            <NewDialog\r\n                                closeFunc={() => {\r\n                                    setOpenNewDialog(false);\r\n                                }}\r\n                            ></NewDialog>\r\n                        ) : null}\r\n                    </Toolbar>\r\n                </Box>\r\n                <IconButton style={{ display: \"none\" }}>\r\n                    <SettingsIcon fontSize=\"large\" />\r\n                </IconButton>\r\n                <AccountDialog src={avatar ? avatar : user}></AccountDialog>\r\n            </Box>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogButton: {\r\n        width: \"128px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function SaveDialog(props) {\r\n    const classes = useStyles();\r\n    const { updFunc, closeFunc } = props.func;\r\n\r\n    return (\r\n        <Dialog open={true} aria-labelledby=\"save-dialog-title\">\r\n            <DialogTitle id=\"save-dialog-title\">Save File?</DialogTitle>\r\n            <DialogActions>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={updFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    Yes\r\n                </Button>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={closeFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    No\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport RemarkMathPlugin from \"remark-math\";\r\nimport { BlockMath, InlineMath } from \"react-katex\";\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport { vscDarkPlus } from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\nimport gfm from \"remark-gfm\";\r\nimport \"katex/dist/katex.min.css\";\r\n\r\nconst _mapProps = (props) => ({\r\n    ...props,\r\n    escapeHtml: false,\r\n    plugins: [[gfm, { singleTilde: false }], RemarkMathPlugin],\r\n    renderers: {\r\n        ...props.renderers,\r\n        code: ({ language, value }) => {\r\n            if (value) {\r\n                return (\r\n                    <SyntaxHighlighter\r\n                        style={vscDarkPlus}\r\n                        language={language}\r\n                        children={value}\r\n                    />\r\n                );\r\n            } else {\r\n                return (\r\n                    <>\r\n                        <>{\"~~~\" + language}</>\r\n                        <br></br>\r\n                        <>~~~</>\r\n                    </>\r\n                );\r\n            }\r\n        },\r\n        math: ({ value }) => <BlockMath>{value}</BlockMath>,\r\n        inlineMath: ({ value }) => <InlineMath>{value}</InlineMath>,\r\n    },\r\n});\r\n\r\nconst Markdown = (props) => <ReactMarkdown {..._mapProps(props)} />;\r\n\r\nexport default Markdown;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const UPDNOTE_Mutation = gql`\r\n    mutation updateNote(\r\n        $id: String!\r\n        $email: String!\r\n        $title: String\r\n        $markdown: String\r\n        $tags: [String]\r\n        $links: [String]\r\n    ) {\r\n        updateNote(\r\n            data: {\r\n                id: $id\r\n                email: $email\r\n                title: $title\r\n                markdown: $markdown\r\n                tags: $tags\r\n                links: $links\r\n            }\r\n        )\r\n    }\r\n`;\r\n","import { String } from \"core-js\";\r\nimport { createContext } from \"react\";\r\n\r\nconst mainContext = createContext({\r\n    mode: String,\r\n    setMode: () => {},\r\n    open: Boolean,\r\n    setOpen: () => {},\r\n    searchStr: String,\r\n    setSearchStr: () => {},\r\n    guide: String,\r\n});\r\n\r\nexport { mainContext };\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport SaveDialog from \"./SaveDialog\";\r\n\r\nimport Markdown from \"./Markdown\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UPDNOTE_Mutation } from \"../../graphql/updateNote\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst pageBarHeight = 24;\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexGrow: 1,\r\n    },\r\n    pageBar: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        alignItems: \"center\",\r\n        listStyle: \"none\",\r\n        margin: 0,\r\n        height: pageBarHeight,\r\n        overflowY: \"auto\",\r\n\r\n        backgroundColor: \"#E0E0E0\",\r\n    },\r\n    chip: {\r\n        margin: \"0px\",\r\n        borderRadius: \"0px\",\r\n        borderRight: `2px solid ${theme.palette.divider}`,\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    chipRoot: {\r\n        transform: \"none\",\r\n        \"&:focus\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n    chipText: {\r\n        width: theme.spacing(12),\r\n        textAlign: \"left\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    chipFocus: {\r\n        backgroundColor: \"white\",\r\n        borderBottom: \"1px solid white!important\",\r\n        \"&:hover\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n    },\r\n    markdown: {\r\n        padding: theme.spacing(3, 0),\r\n    },\r\n    mainWindowWrapper: {\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        position: \"relative\",\r\n    },\r\n    mainWindow: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        borderRadius: \"0px\",\r\n        overflow: \"auto\",\r\n    },\r\n    viewWindow: {\r\n        display: \"flex\",\r\n        width: \"50%\",\r\n        borderRadius: \"0px\",\r\n        overflow: \"auto\",\r\n    },\r\n    modeButtonWrapper: {\r\n        display: \"flex\",\r\n        position: \"absolute\",\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(2),\r\n        borderRadius: \"16px\",\r\n        border: \"1px solid black\",\r\n        backgroundColor: \"white\",\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"0px 3px\",\r\n    },\r\n    inputStyle: {\r\n        width: \"100%\",\r\n        height: \"calc(100vh - 130px)\",\r\n        fontSize: \"18px\",\r\n        padding: theme.spacing(2, 4),\r\n        resize: \"none\",\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        overflow: \"auto\",\r\n    },\r\n    outputStyle: {\r\n        width: \"100%\",\r\n        height: \"calc(100vh - 130px)\",\r\n        fontSize: \"18px\",\r\n        textAlign: \"left\",\r\n        backgroundColor: \"white\",\r\n        padding: theme.spacing(2, 4),\r\n        overflow: \"auto\",\r\n    },\r\n}));\r\n\r\nexport default function Main() {\r\n    const [updNote] = useMutation(UPDNOTE_Mutation);\r\n    const {\r\n        user: { email },\r\n    } = useContext(AuthContext);\r\n    const { guide } = useContext(mainContext);\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const { usernotes, openFiles, currentOpenFile, actions } = useContext(\r\n        filecontext\r\n    );\r\n\r\n    const [mode, setMode] = React.useState(\"main\");\r\n    const [pageNum, setPageNum] = React.useState(0);\r\n    const [pages, setPages] = React.useState([]);\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n    const [dialogFunctions, setDialogFunctions] = React.useState({});\r\n\r\n    // add page in frontend\r\n    const addPage = (node) => {\r\n        setPages([...pages, node]);\r\n        setPageNum(pageNum + 1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // add page in frontend\r\n        if (openFiles.length > pageNum) {\r\n            let fileID = openFiles[openFiles.length - 1];\r\n            let node = Object.assign(\r\n                { unsaved: false },\r\n                usernotes.find((e) => e.id === fileID)\r\n            );\r\n            addPage(node);\r\n        }\r\n        // delete page in frontend\r\n        if (openFiles.length < pageNum) {\r\n            let chipToDelete = pages.findIndex(\r\n                (e) => !openFiles.includes(e.id)\r\n            );\r\n            // set frontend pages\r\n            let updPages = pages.filter(\r\n                (data, index) => index !== chipToDelete\r\n            );\r\n            setPages(updPages);\r\n\r\n            // set pageNum\r\n            setPageNum(pageNum - 1);\r\n        }\r\n    }, [openFiles]);\r\n\r\n    // delete page\r\n    const handleDelete = (id) => {\r\n        let chipToDelete = openFiles.indexOf(id);\r\n        if (pages[chipToDelete].unsaved) {\r\n            setOpenDialog(true);\r\n            setDialogFunctions({\r\n                updFunc: async (e) => {\r\n                    await save(id);\r\n                    actions.close(id);\r\n                    setOpenDialog(false);\r\n                },\r\n                closeFunc: () => {\r\n                    actions.close(id);\r\n                    setOpenDialog(false);\r\n                },\r\n            });\r\n        } else {\r\n            actions.close(id);\r\n        }\r\n    };\r\n\r\n    const handleMode = (updMode) => {\r\n        setMode(updMode);\r\n    };\r\n\r\n    const handleContentData = (val) => {\r\n        let currentPageIndex = openFiles.indexOf(currentOpenFile);\r\n        let updPages = [...pages];\r\n        updPages[currentPageIndex].markdown = val;\r\n        updPages[currentPageIndex].unsaved = true;\r\n        setPages(updPages);\r\n    };\r\n\r\n    const save = async (fileID) => {\r\n        let currentPageIndex = openFiles.indexOf(fileID);\r\n        const { id, title, markdown, tags, unsaved } = pages[currentPageIndex];\r\n        if (unsaved) {\r\n            try {\r\n                const regex = /\\[\\[(\\w*?)\\]\\]/gm;\r\n                const str = markdown;\r\n                let g;\r\n                let links = [];\r\n                while ((g = regex.exec(str)) !== null) {\r\n                    // This is necessary to avoid infinite loops with zero-width matches\r\n                    if (g.index === regex.lastIndex) {\r\n                        regex.lastIndex++;\r\n                    }\r\n\r\n                    // The result can be accessed through the `m`-variable.\r\n                    g.forEach((match, groupIndex) => {\r\n                        if (groupIndex === 1) links.push(match);\r\n                    });\r\n                }\r\n                let newPages = [...pages];\r\n                newPages[currentPageIndex].links = links;\r\n                actions.save(fileID, {\r\n                    id,\r\n                    title,\r\n                    markdown,\r\n                    tags,\r\n                    links,\r\n                });\r\n                newPages[currentPageIndex].unsaved = false;\r\n                setPages(newPages);\r\n                await updNote({\r\n                    variables: { id, email, markdown, links },\r\n                });\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            {openFiles.length === 0 ? (\r\n                <div className={classes.mainWindowWrapper}>\r\n                    <Markdown className={`input ${classes.outputStyle}`}>\r\n                        {guide}\r\n                    </Markdown>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div className={classes.pageBar}>\r\n                        {openFiles.map((fileID, index) => {\r\n                            return (\r\n                                <li key={index}>\r\n                                    <Chip\r\n                                        size=\"small\"\r\n                                        label={\r\n                                            usernotes.find(\r\n                                                (e) => e.id === fileID\r\n                                            ).title\r\n                                        }\r\n                                        disableRipple={true}\r\n                                        onClick={(e) => {\r\n                                            actions.open(fileID);\r\n                                            document\r\n                                                .getElementsByClassName(\r\n                                                    \"input\"\r\n                                                )[0]\r\n                                                .focus();\r\n                                        }}\r\n                                        onDelete={() => handleDelete(fileID)}\r\n                                        className={clsx(classes.chip, {\r\n                                            [classes.chipFocus]:\r\n                                                fileID === currentOpenFile,\r\n                                        })}\r\n                                        classes={{\r\n                                            root: classes.chipRoot,\r\n                                            label: classes.chipText,\r\n                                        }}\r\n                                    />\r\n                                </li>\r\n                            );\r\n                        })}\r\n                        <div\r\n                            style={{\r\n                                flexGrow: 1,\r\n                                height: pageBarHeight,\r\n                                borderBottom: `1px solid ${theme.palette.divider}`,\r\n                            }}\r\n                        ></div>\r\n                    </div>\r\n                    <div className={classes.mainWindowWrapper}>\r\n                        <div className={classes.modeButtonWrapper}>\r\n                            <IconButton\r\n                                color={mode === \"main\" ? \"inherit\" : \"default\"}\r\n                                onClick={() => handleMode(\"main\")}\r\n                                classes={{\r\n                                    root: classes.nopad,\r\n                                }}\r\n                                disableRipple={true}\r\n                            >\r\n                                <EditIcon />\r\n                            </IconButton>\r\n                            <Divider\r\n                                orientation=\"vertical\"\r\n                                style={{\r\n                                    height: \"24px\",\r\n                                    backgroundColor: \"rgb(160, 160, 160)\",\r\n                                }}\r\n                            ></Divider>\r\n                            <IconButton\r\n                                color={mode === \"mix\" ? \"inherit\" : \"default\"}\r\n                                onClick={() => handleMode(\"mix\")}\r\n                                classes={{\r\n                                    root: classes.nopad,\r\n                                }}\r\n                                disableRipple={true}\r\n                            >\r\n                                <VisibilityIcon />\r\n                            </IconButton>\r\n                            {pageNum === openFiles.length &&\r\n                            pages[openFiles.indexOf(currentOpenFile)]\r\n                                .unsaved ? (\r\n                                <>\r\n                                    <Divider\r\n                                        orientation=\"vertical\"\r\n                                        style={{\r\n                                            height: \"24px\",\r\n                                            backgroundColor:\r\n                                                \"rgb(160, 160, 160)\",\r\n                                        }}\r\n                                    ></Divider>\r\n                                    <IconButton\r\n                                        id=\"saveMain\"\r\n                                        onClick={() => save(currentOpenFile)}\r\n                                        classes={{\r\n                                            root: classes.nopad,\r\n                                        }}\r\n                                        disableRipple={true}\r\n                                    >\r\n                                        <SaveIcon />\r\n                                    </IconButton>\r\n                                </>\r\n                            ) : null}\r\n                            {openDialog ? (\r\n                                <SaveDialog func={dialogFunctions}></SaveDialog>\r\n                            ) : null}\r\n                        </div>\r\n                        {mode === \"main\" || mode === \"mix\" ? (\r\n                            <Paper\r\n                                elevation={0}\r\n                                className={classes.mainWindow}\r\n                                style={mode === \"main\" ? { width: \"100%\" } : {}}\r\n                            >\r\n                                <textarea\r\n                                    autoFocus\r\n                                    className={`input ${classes.inputStyle}`}\r\n                                    value={\r\n                                        pageNum === openFiles.length\r\n                                            ? pages[\r\n                                                  openFiles.indexOf(\r\n                                                      currentOpenFile\r\n                                                  )\r\n                                              ].markdown\r\n                                            : \"\"\r\n                                    }\r\n                                    onChange={(e) => {\r\n                                        handleContentData(e.target.value);\r\n                                    }}\r\n                                ></textarea>\r\n                            </Paper>\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                        {mode === \"mix\" ? (\r\n                            <Divider orientation=\"vertical\"></Divider>\r\n                        ) : null}\r\n                        {mode === \"view\" || mode === \"mix\" ? (\r\n                            <Paper\r\n                                elevation={0}\r\n                                className={classes.viewWindow}\r\n                                style={mode === \"view\" ? { width: \"100%\" } : {}}\r\n                            >\r\n                                <Markdown\r\n                                    className={`input ${classes.outputStyle}`}\r\n                                >\r\n                                    {pageNum === openFiles.length\r\n                                        ? pages[\r\n                                              openFiles.indexOf(currentOpenFile)\r\n                                          ].markdown\r\n                                        : \"\"}\r\n                                </Markdown>\r\n                            </Paper>\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const NOTES_QUERY = gql`\r\n    query usernotes($email: String!) {\r\n        usernotes(email: $email) {\r\n            id\r\n            tags\r\n            links\r\n            markdown\r\n            title\r\n        }\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const AVATAR_QUERY = gql`\r\n    query userAvatar($id: String!) {\r\n        userAvatar(id: $id)\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const GUIDE_QUERY = gql`\r\n    query {\r\n        user\r\n    }\r\n`;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    titlebar: {\r\n        flexGrow: 1,\r\n        fontSize: \"14px\",\r\n        margin: theme.spacing(1),\r\n        outline: \"none\",\r\n        padding: \"1px 6px\",\r\n        borderRadius: \"12px\",\r\n        borderColor: `${theme.palette.divider}`,\r\n        \"&:focus\": {\r\n            borderColor: theme.palette.text.primary,\r\n        },\r\n    },\r\n    linksIOTitle: {\r\n        height: \"28px\",\r\n        padding: theme.spacing(2, 0),\r\n    },\r\n}));\r\n\r\nexport default function SearchBox() {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const { searchStr, setSearchStr } = useContext(mainContext);\r\n    const [tagItem, setTagItem] = useState([]);\r\n    const [titleItem, setTitleItem] = useState([]);\r\n    const [mdItem, setMdItem] = useState([]);\r\n    const [openTitle, setOpenTitle] = useState(false);\r\n    const [openMd, setOpenMd] = useState(false);\r\n\r\n    const autoFocus = () => {\r\n        if (document.getElementsByClassName(\"input\")[0]) {\r\n            document.getElementsByClassName(\"input\")[0].focus();\r\n        }\r\n    };\r\n\r\n    const search = (e) => {\r\n        setSearchStr(e.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (searchStr) {\r\n            if (searchStr.slice(0, 5) === \"tags:\") {\r\n                let alltags = [];\r\n                usernotes.forEach((e) => {\r\n                    let { title, id, markdown } = e;\r\n                    e.tags.forEach((ele) => {\r\n                        if (ele === searchStr.slice(6)) {\r\n                            alltags.push({ title, id, markdown });\r\n                        }\r\n                    });\r\n                });\r\n                setTagItem(alltags);\r\n            } else {\r\n                let titlefiles = [];\r\n                let mdfiles = [];\r\n                usernotes.forEach((e) => {\r\n                    let { title, id, markdown } = e;\r\n                    if (e.title.includes(searchStr)) {\r\n                        titlefiles.push({ title, id, markdown });\r\n                    }\r\n                    if (e.markdown.includes(searchStr)) {\r\n                        mdfiles.push({ title, id, markdown });\r\n                    }\r\n                });\r\n                setTitleItem(titlefiles);\r\n                setMdItem(mdfiles);\r\n            }\r\n        } else {\r\n            setTitleItem([]);\r\n            setMdItem([]);\r\n        }\r\n\r\n        return () => {};\r\n    }, [searchStr]);\r\n\r\n    return (\r\n        <>\r\n            <CssBaseline />\r\n            <div style={{ display: \"flex\" }}>\r\n                <input\r\n                    id=\"searchbox\"\r\n                    className={classes.titlebar}\r\n                    placeholder=\"Search files or tags\"\r\n                    onChange={search}\r\n                    value={searchStr}\r\n                />\r\n            </div>\r\n            <Divider style={{ height: \"3px\" }} />\r\n            <div style={{ flexGrow: 1, overflowY: \"auto\" }}>\r\n                <List disablePadding={true}>\r\n                    {searchStr.slice(0, 5) === \"tags:\" ? (\r\n                        tagItem.map((obj, index) => (\r\n                            <>\r\n                                <ListItem\r\n                                    button\r\n                                    key={index}\r\n                                    onClick={() => {\r\n                                        actions.open(obj.id);\r\n                                        autoFocus();\r\n                                    }}\r\n                                >\r\n                                    <ListItemText primary={obj.title} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                            </>\r\n                        ))\r\n                    ) : (\r\n                        <>\r\n                            <ListItem\r\n                                button\r\n                                key=\"titleMatched\"\r\n                                onClick={() => setOpenTitle(!openTitle)}\r\n                                className={classes.linksIOTitle}\r\n                            >\r\n                                {openTitle ? (\r\n                                    <ExpandLessIcon />\r\n                                ) : (\r\n                                    <ExpandMoreIcon />\r\n                                )}\r\n                                <ListItemText primary={\"File\"} />\r\n                            </ListItem>\r\n                            <Divider />\r\n                            {openTitle\r\n                                ? titleItem.map((obj, index) => (\r\n                                      <>\r\n                                          <ListItem\r\n                                              button\r\n                                              key={index}\r\n                                              onClick={() => {\r\n                                                  actions.open(obj.id);\r\n                                                  autoFocus();\r\n                                              }}\r\n                                          >\r\n                                              <ListItemText\r\n                                                  primary={obj.title}\r\n                                              />\r\n                                          </ListItem>\r\n                                          <Divider />\r\n                                      </>\r\n                                  ))\r\n                                : null}\r\n                            <ListItem\r\n                                button\r\n                                key=\"mdMatched\"\r\n                                onClick={() => setOpenMd(!openMd)}\r\n                                className={classes.linksIOTitle}\r\n                            >\r\n                                {openMd ? (\r\n                                    <ExpandLessIcon />\r\n                                ) : (\r\n                                    <ExpandMoreIcon />\r\n                                )}\r\n                                <ListItemText primary={\"Content\"} />\r\n                            </ListItem>\r\n                            <Divider />\r\n                            {openMd\r\n                                ? mdItem.map((obj, index) => (\r\n                                      <>\r\n                                          <ListItem\r\n                                              button\r\n                                              key={index}\r\n                                              onClick={() => {\r\n                                                  actions.open(obj.id);\r\n                                                  autoFocus();\r\n                                              }}\r\n                                          >\r\n                                              <ListItemText\r\n                                                  primary={obj.title}\r\n                                              />\r\n                                          </ListItem>\r\n                                          <Divider />\r\n                                      </>\r\n                                  ))\r\n                                : null}\r\n                        </>\r\n                    )}\r\n                </List>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dialogButton: {\r\n        width: \"256px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function RenameDialog(props) {\r\n    const classes = useStyles();\r\n    const { usernotes, actions } = useContext(filecontext);\r\n    const [title, setTitle] = React.useState(\"\");\r\n    const [valid, setValid] = React.useState(true);\r\n    const [helper, setHelper] = React.useState(\"\");\r\n\r\n    const handleTitle = (val) => {\r\n        setTitle(val);\r\n        setValid(true);\r\n    };\r\n\r\n    const handleRename = () => {\r\n        // check title validity\r\n        if (!title) {\r\n            setValid(false);\r\n            setHelper(\"empty name!\");\r\n            return;\r\n        }\r\n        if (usernotes.findIndex((notes) => notes.title === title) !== -1) {\r\n            setValid(false);\r\n            setHelper(\"name existed!\");\r\n            return;\r\n        }\r\n        actions.rename(props.fileID, title);\r\n        props.closeFunc();\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={true}\r\n            aria-labelledby={`form-dialog-title_${props.fileID}`}\r\n        >\r\n            <DialogTitle id={`form-dialog-title_${props.fileID}`}>\r\n                New name\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    error={!valid}\r\n                    helperText={!valid ? helper : \"\"}\r\n                    margin=\"dense\"\r\n                    id={`renameBox_${props.fileID}`}\r\n                    label=\"new name\"\r\n                    fullWidth\r\n                    onChange={(e) => handleTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                            e.preventDefault();\r\n                            handleRename();\r\n                        }\r\n                    }}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.closeFunc} color=\"primary\">\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={handleRename} color=\"primary\">\r\n                    OK\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogButton: {\r\n        width: \"128px\",\r\n        fontSize: \"18px\",\r\n        textTransform: \"none\",\r\n    },\r\n    dialog: {},\r\n}));\r\n\r\nexport default function DeleteDialog(props) {\r\n    const classes = useStyles();\r\n    const { actions } = useContext(filecontext);\r\n\r\n    return (\r\n        <Dialog\r\n            open={true}\r\n            aria-labelledby={`delete-dialog-title_${props.fileID}`}\r\n        >\r\n            <DialogTitle id={`delete-dialog-title_${props.fileID}`}>\r\n                {`Delete ${props.title}?`}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={() => {\r\n                        actions.delete(props.fileID);\r\n                        props.closeFunc();\r\n                    }}\r\n                    color=\"primary\"\r\n                >\r\n                    Yes\r\n                </Button>\r\n                <Button\r\n                    className={classes.dialogButton}\r\n                    onClick={props.closeFunc}\r\n                    color=\"primary\"\r\n                >\r\n                    No\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\n\r\nimport RenameDialog from \"./RenameDialog\";\r\nimport DeleteDialog from \"./DeleteDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    labelIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    labelText: {\r\n        textAlign: \"left\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"inherit\",\r\n        overflow: \"hidden\",\r\n        whiteSpace: \"nowrap\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    menuItem: {\r\n        fontSize: \"14px\",\r\n        width: \"128px\",\r\n    },\r\n}));\r\n\r\nexport default function TreeMenu(props) {\r\n    const classes = useStyles();\r\n    const node = props.node;\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [openRenameDialog, setOpenRenameDialog] = React.useState(false);\r\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\r\n    const data = useContext(filecontext);\r\n    const { actions } = data;\r\n\r\n    const handleClick = (event) => {\r\n        event.preventDefault();\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div\r\n                onContextMenu={handleClick}\r\n                style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    position: \"relative\",\r\n                }}\r\n                onClick={(e) => {\r\n                    if (e.button === 0) {\r\n                        actions.open(node.id);\r\n                        if (document.getElementsByClassName(\"input\")[0])\r\n                            document.getElementsByClassName(\"input\")[0].focus();\r\n                    } else if (e.button === 2) {\r\n                        handleClick();\r\n                    }\r\n                }}\r\n            >\r\n                {node.type === \"dir\" ? (\r\n                    <FolderIcon\r\n                        fontSize=\"small\"\r\n                        className={classes.labelIcon}\r\n                    />\r\n                ) : (\r\n                    <InsertDriveFileIcon\r\n                        fontSize=\"small\"\r\n                        className={classes.labelIcon}\r\n                    />\r\n                )}\r\n\r\n                <Typography className={classes.labelText}>\r\n                    {node.title}\r\n                </Typography>\r\n            </div>\r\n            {node.type !== \"dir\" ? (\r\n                <Menu\r\n                    id=\"name\"\r\n                    anchorEl={anchorEl}\r\n                    getContentAnchorEl={null}\r\n                    anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n                    transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n                    keepMounted\r\n                    open={Boolean(anchorEl)}\r\n                    onClose={() => {\r\n                        setAnchorEl(null);\r\n                    }}\r\n                    autoFocus={false}\r\n                >\r\n                    <MenuItem\r\n                        className={classes.menuItem}\r\n                        onClick={() => {\r\n                            setOpenRenameDialog(true);\r\n                            setAnchorEl(null);\r\n                        }}\r\n                        onKeyDown={(e) => {\r\n                            if (e.key === \"Enter\") {\r\n                                e.preventDefault();\r\n                            }\r\n                        }}\r\n                    >\r\n                        Rename\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        className={classes.menuItem}\r\n                        onClick={() => {\r\n                            setOpenDeleteDialog(true);\r\n                            setAnchorEl(null);\r\n                        }}\r\n                    >\r\n                        Delete\r\n                    </MenuItem>\r\n                </Menu>\r\n            ) : null}\r\n            {openRenameDialog ? (\r\n                <RenameDialog\r\n                    fileID={node.id}\r\n                    closeFunc={() => setOpenRenameDialog(false)}\r\n                ></RenameDialog>\r\n            ) : null}\r\n            {openDeleteDialog ? (\r\n                <DeleteDialog\r\n                    fileID={node.id}\r\n                    title={node.title}\r\n                    closeFunc={() => setOpenDeleteDialog(false)}\r\n                ></DeleteDialog>\r\n            ) : null}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TreeView from \"@material-ui/lab/TreeView\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport TreeItem from \"@material-ui/lab/TreeItem\";\r\nimport TreeMenu from \"./TreeMenuItem\";\r\n\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        height: 110,\r\n        flexGrow: 1,\r\n        maxWidth: 400,\r\n        paddingTop: \"6px\",\r\n    },\r\n    labelIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    labelText: {\r\n        textAlign: \"left\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"inherit\",\r\n        overflow: \"hidden\",\r\n        whiteSpace: \"nowrap\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n    colorWhite1: {\r\n        \"&.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\r\n            backgroundColor: \"white\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function FolderTree() {\r\n    const classes = useStyles();\r\n    const data = useContext(filecontext);\r\n    const context = useContext(AuthContext);\r\n\r\n    const renderTree = (node) => (\r\n        <TreeItem\r\n            key={node.id}\r\n            nodeId={node.id}\r\n            label={<TreeMenu node={node}></TreeMenu>}\r\n            classes={{\r\n                root: classes.colorWhite1,\r\n            }}\r\n        >\r\n            {Array.isArray(node.usernotes)\r\n                ? node.usernotes.map((child) => renderTree(child))\r\n                : null}\r\n        </TreeItem>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <TreeView\r\n                className={classes.root}\r\n                defaultCollapseIcon={<ExpandMoreIcon />}\r\n                defaultExpanded={[\"root\"]}\r\n                defaultExpandIcon={<ChevronRightIcon />}\r\n            >\r\n                {renderTree({\r\n                    ...data,\r\n                    id: \"root\",\r\n                    title: context.user.name,\r\n                    type: \"dir\",\r\n                })}\r\n            </TreeView>\r\n        </>\r\n    );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport FolderOutlinedIcon from \"@material-ui/icons/FolderOutlined\";\r\nimport DeviceHubIcon from \"@material-ui/icons/DeviceHub\";\r\n\r\nimport SearchBox from \"./SearchBox\";\r\nimport FolderTree from \"./FolderTree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nconst sidebarWidth = 32;\r\nconst drawerWidth = 256;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n    },\r\n    sidebarWrapper: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"6px 0px\",\r\n    },\r\n    rootShift: {\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginRight: drawerWidth,\r\n    },\r\n    drawer: {\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaperWrapper: {\r\n        position: \"relative\",\r\n    },\r\n    drawerPaper: {\r\n        position: \"absolute\",\r\n        top: \"0px\",\r\n        right: sidebarWidth,\r\n        width: drawerWidth,\r\n        bottom: \"0px\",\r\n    },\r\n}));\r\n\r\nexport default function PersistentDrawerLeft() {\r\n    const classes = useStyles();\r\n    const { open, setOpen, mode, setMode } = useContext(mainContext);\r\n    // const [open, setOpen] = useState(false);\r\n    // const [mode, setMode] = useState(\"search\");\r\n    const [graphMode, setGraph] = useState(false);\r\n\r\n    const handleMode = (updMode) => {\r\n        setMode(updMode);\r\n        if (!open) {\r\n            setOpen(true);\r\n        }\r\n        if (open && updMode === mode) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const handleGraphMode = () => {\r\n        setGraph(!graphMode);\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(classes.root, { [classes.rootShift]: open })}>\r\n            <CssBaseline />\r\n            <div className={classes.sidebarWrapper}>\r\n                <IconButton\r\n                    color={mode === \"search\" && open ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={() => handleMode(\"search\")}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    <SearchIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    color={mode === \"file\" && open ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={() => handleMode(\"file\")}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    <FolderOutlinedIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    color={graphMode ? \"inherit\" : \"default\"}\r\n                    aria-label=\"open drawer\"\r\n                    onClick={handleGraphMode}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    style={{ display: \"none\" }}\r\n                    disableRipple={true}\r\n                >\r\n                    <DeviceHubIcon />\r\n                </IconButton>\r\n            </div>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                    docked: classes.drawerPaperWrapper,\r\n                }}\r\n            >\r\n                {mode === \"search\" ? (\r\n                    <SearchBox></SearchBox>\r\n                ) : (\r\n                    <FolderTree></FolderTree>\r\n                )}\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport LinkIcon from \"@material-ui/icons/Link\";\r\nimport LocalOfferOutlinedIcon from \"@material-ui/icons/LocalOfferOutlined\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\nimport { SettingsInputComponentOutlined } from \"@material-ui/icons\";\r\n\r\nconst sidebarWidth = 32;\r\nconst drawerWidth = 256;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n    },\r\n    sidebarWrapper: {\r\n        width: sidebarWidth,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    nopad: {\r\n        padding: \"0px\",\r\n        margin: \"6px 0px\",\r\n    },\r\n    rootShift: {\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: drawerWidth,\r\n    },\r\n    drawer: {\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaperWrapper: {\r\n        position: \"relative\",\r\n    },\r\n    drawerPaper: {\r\n        position: \"absolute\",\r\n        top: \"0px\",\r\n        right: sidebarWidth,\r\n        width: drawerWidth,\r\n        bottom: \"0px\",\r\n    },\r\n    drawerButton: {\r\n        width: \"36px\",\r\n        padding: \"0px\",\r\n        margin: \"6px 0px 6px 6px\",\r\n    },\r\n    linksIOTitle: {\r\n        height: \"28px\",\r\n        padding: theme.spacing(2, 0),\r\n    },\r\n}));\r\n\r\nexport default function PersistentDrawerRight() {\r\n    const classes = useStyles();\r\n    const { currentOpenFile, usernotes, actions } = useContext(filecontext);\r\n    const { setSearchStr, setOpen, setMode } = useContext(mainContext);\r\n    const [r_open, setr_open] = useState(false);\r\n    const [r_mode, setr_Mode] = useState(\"link\");\r\n\r\n    //links, tags to be showed\r\n    const [inlinks, setInLink] = useState([]);\r\n    const [outlinks, setOutLink] = useState([]);\r\n    const [openIn, setOpenIn] = useState(false);\r\n    const [openOut, setOpenOut] = useState(false);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (currentOpenFile) {\r\n                let title = usernotes.find((e) => e.id === currentOpenFile)\r\n                    .title;\r\n                let inLinks = {};\r\n                let outLinks = {};\r\n                let tmp = usernotes.find((e) => e.id === currentOpenFile).links;\r\n                usernotes.forEach((e) => {\r\n                    e.links.forEach((ele) => {\r\n                        if (ele === title) {\r\n                            if (!Object.keys(inLinks).includes(e.title)) {\r\n                                inLinks[e.title] = e.id;\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n                setInLink(Object.entries(inLinks));\r\n                usernotes.forEach((e) => {\r\n                    if (tmp.includes(e.title)) {\r\n                        outLinks[e.title] = e.id;\r\n                    }\r\n                });\r\n                setOutLink(Object.entries(outLinks));\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        return () => {};\r\n    }, [usernotes, currentOpenFile]);\r\n\r\n    const [tags, setTag] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let alltags = {};\r\n        usernotes.forEach((e) => {\r\n            e.tags.forEach((ele) => {\r\n                if (Object.keys(alltags).includes(ele)) {\r\n                    alltags[ele] += 1;\r\n                } else {\r\n                    alltags[ele] = 1;\r\n                }\r\n            });\r\n        });\r\n        setTag(Object.entries(alltags));\r\n        return () => {};\r\n    }, [usernotes]);\r\n    const [showingItem, setShowingItem] = useState([]);\r\n    useEffect(() => {\r\n        setShowingItem(r_mode === \"link\" ? inlinks : tags);\r\n        return () => {};\r\n    }, [r_mode, inlinks, outlinks, tags]);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setr_open(!r_open);\r\n    };\r\n\r\n    const handleMode = (updMode) => {\r\n        setr_Mode(updMode);\r\n    };\r\n\r\n    const handleSearch = (tag) => {\r\n        setSearchStr(\"tags: \" + tag);\r\n        setOpen(true);\r\n        setMode(\"search\");\r\n    };\r\n\r\n    const handleLink = (id) => {\r\n        actions.open(id);\r\n        if (document.getElementsByClassName(\"input\")[0])\r\n            document.getElementsByClassName(\"input\")[0].focus();\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(classes.root, { [classes.rootShift]: r_open })}>\r\n            <CssBaseline />\r\n            <div className={classes.sidebarWrapper}>\r\n                <IconButton\r\n                    color=\"default\"\r\n                    aria-label=\"open drawer\"\r\n                    onClick={handleDrawerOpen}\r\n                    classes={{\r\n                        root: classes.nopad,\r\n                    }}\r\n                    disableRipple={true}\r\n                >\r\n                    {r_open ? <ChevronRightIcon /> : <ChevronLeftIcon />}\r\n                </IconButton>\r\n            </div>\r\n\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"right\"\r\n                open={r_open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                    docked: classes.drawerPaperWrapper,\r\n                }}\r\n            >\r\n                <div style={{ display: \"flex\" }}>\r\n                    <IconButton\r\n                        color={r_mode === \"link\" ? \"inherit\" : \"default\"}\r\n                        onClick={() => handleMode(\"link\")}\r\n                        classes={{\r\n                            root: classes.drawerButton,\r\n                        }}\r\n                        disableRipple={true}\r\n                    >\r\n                        <LinkIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        color={r_mode === \"tag\" ? \"inherit\" : \"default\"}\r\n                        onClick={() => handleMode(\"tag\")}\r\n                        classes={{\r\n                            root: classes.drawerButton,\r\n                        }}\r\n                        disableRipple={true}\r\n                    >\r\n                        <LocalOfferOutlinedIcon />\r\n                    </IconButton>\r\n                </div>\r\n                <Divider style={{ height: \"3px\" }} />\r\n                <div style={{ flexGrow: 1, overflowY: \"auto\" }}>\r\n                    <List disablePadding={true}>\r\n                        {r_mode === \"tag\" ? (\r\n                            tags.map((text, index) => (\r\n                                <>\r\n                                    <ListItem\r\n                                        button\r\n                                        key={index}\r\n                                        onClick={() => {\r\n                                            handleSearch(text[0]);\r\n                                        }}\r\n                                    >\r\n                                        <ListItemText\r\n                                            primary={\"# \" + text[0]}\r\n                                        />\r\n                                        <ListItemText\r\n                                            primary={text[1]}\r\n                                            style={{ textAlign: \"right\" }}\r\n                                        />\r\n                                    </ListItem>\r\n                                    <Divider />\r\n                                </>\r\n                            ))\r\n                        ) : (\r\n                            <>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"inLinks\"\r\n                                    onClick={() => setOpenIn(!openIn)}\r\n                                    className={classes.linksIOTitle}\r\n                                >\r\n                                    {openIn ? (\r\n                                        <ExpandLessIcon />\r\n                                    ) : (\r\n                                        <ExpandMoreIcon />\r\n                                    )}\r\n                                    <ListItemText primary={\"Linked from...\"} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                                {openIn\r\n                                    ? inlinks.map((text, index) => (\r\n                                          <>\r\n                                              <ListItem\r\n                                                  button\r\n                                                  key={index}\r\n                                                  onClick={() => {\r\n                                                      handleLink(text[1]);\r\n                                                  }}\r\n                                              >\r\n                                                  <ListItemText\r\n                                                      primary={text[0]}\r\n                                                  />\r\n                                              </ListItem>\r\n                                              <Divider />\r\n                                          </>\r\n                                      ))\r\n                                    : null}\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"outLinks\"\r\n                                    onClick={() => setOpenOut(!openOut)}\r\n                                    className={classes.linksIOTitle}\r\n                                >\r\n                                    {openOut ? (\r\n                                        <ExpandLessIcon />\r\n                                    ) : (\r\n                                        <ExpandMoreIcon />\r\n                                    )}\r\n                                    <ListItemText primary={\"Link to...\"} />\r\n                                </ListItem>\r\n                                <Divider />\r\n                                {openOut\r\n                                    ? outlinks.map((text, index) => (\r\n                                          <>\r\n                                              <ListItem\r\n                                                  button\r\n                                                  key={index}\r\n                                                  onClick={() => {\r\n                                                      handleLink(text[1]);\r\n                                                  }}\r\n                                              >\r\n                                                  <ListItemText\r\n                                                      primary={text[0]}\r\n                                                  />\r\n                                              </ListItem>\r\n                                              <Divider />\r\n                                          </>\r\n                                      ))\r\n                                    : null}\r\n                            </>\r\n                        )}\r\n                    </List>\r\n                </div>\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const ADDTAG_Mutation = gql`\r\n    mutation addtag($id: String!, $email: String!, $tag: String!) {\r\n        addtag(id: $id, email: $email, tag: $tag)\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const DELTAG_Mutation = gql`\r\n    mutation deletetag($id: String!, $email: String!, $index: Int!) {\r\n        deletetag(id: $id, email: $email, index: $index)\r\n    }\r\n`;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { ADDTAG_Mutation } from \"../../graphql/addTag\";\r\nimport { DELTAG_Mutation } from \"../../graphql/delTag\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        alignItems: \"center\",\r\n        listStyle: \"none\",\r\n        margin: 0,\r\n        height: \"32px\",\r\n        overflowY: \"auto\",\r\n    },\r\n    chip: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    titlebar: {\r\n        flexGrow: 1,\r\n        fontSize: \"14px\",\r\n        margin: theme.spacing(0.5),\r\n        outline: \"none\",\r\n        padding: \"1px 6px\",\r\n        borderRadius: \"12px\",\r\n        borderColor: `${theme.palette.divider}`,\r\n        \"&:focus\": {\r\n            borderColor: theme.palette.text.primary,\r\n        },\r\n    },\r\n    alert: {\r\n        width: \"256px\",\r\n    },\r\n}));\r\n\r\nexport default function TagBar() {\r\n    const classes = useStyles();\r\n    const { currentOpenFile, usernotes, setuserNotes } = useContext(\r\n        filecontext\r\n    );\r\n    const [anchorEle, setAnchorEle] = useState(null);\r\n\r\n    const handleClose = () => {\r\n        setAnchorEle(null);\r\n    };\r\n    React.useEffect(() => {\r\n        if (anchorEle) {\r\n            setTimeout(function () {\r\n                setAnchorEle(null);\r\n            }, 1300); //1.3 Second delay\r\n        }\r\n    }, [anchorEle]);\r\n    const open = Boolean(anchorEle);\r\n    const id = open ? \"simple-popover\" : undefined;\r\n\r\n    const context = useContext(AuthContext);\r\n    const [addtag] = useMutation(ADDTAG_Mutation);\r\n    const [deltag] = useMutation(DELTAG_Mutation);\r\n    const [tag, setTag] = useState(\"\");\r\n\r\n    const [chipData, setChipData] = useState([]);\r\n    useEffect(() => {\r\n        if (currentOpenFile && usernotes) {\r\n            setChipData(usernotes.find((e) => e.id === currentOpenFile).tags);\r\n        }\r\n        return () => {};\r\n    }, [currentOpenFile, usernotes]);\r\n\r\n    const updTag = (e) => {\r\n        setTag(e.target.value);\r\n    };\r\n\r\n    const handleDelete = async (chipToDelete) => {\r\n        try {\r\n            let chips = chipData.filter(\r\n                (data, index) => index !== chipToDelete\r\n            );\r\n            setChipData(chips);\r\n            let newnotes = [...usernotes];\r\n            newnotes\r\n                .find((e) => e.id === currentOpenFile)\r\n                .tags.splice(chipToDelete, 1);\r\n            setuserNotes(newnotes);\r\n            await deltag({\r\n                variables: {\r\n                    id: currentOpenFile,\r\n                    email: context.user.email,\r\n                    index: chipToDelete,\r\n                },\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    const newTag = async (e) => {\r\n        if (e.key === \"Enter\" && e.target.value !== \"\" && currentOpenFile) {\r\n            try {\r\n                if (chipData.includes(tag)) {\r\n                    setAnchorEle(document.body);\r\n                    return;\r\n                }\r\n                let newnotes = [...usernotes];\r\n                newnotes.find((e) => e.id === currentOpenFile).tags.push(tag);\r\n                setuserNotes(newnotes);\r\n                setChipData([...chipData, tag]);\r\n                e.target.value = \"\";\r\n                await addtag({\r\n                    variables: {\r\n                        id: currentOpenFile,\r\n                        email: context.user.email,\r\n                        tag,\r\n                    },\r\n                });\r\n                setTag(\"\");\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <CssBaseline />\r\n            <div className={classes.root}>\r\n                {chipData.map((data, index) => {\r\n                    return (\r\n                        <li key={index}>\r\n                            <Chip\r\n                                size=\"small\"\r\n                                label={data}\r\n                                onDelete={() => handleDelete(index)}\r\n                                className={classes.chip}\r\n                            />\r\n                        </li>\r\n                    );\r\n                })}\r\n                <input\r\n                    id=\"taginput\"\r\n                    className={classes.titlebar}\r\n                    placeholder=\"New tags\"\r\n                    onChange={updTag}\r\n                    onKeyDown={newTag}\r\n                />\r\n                <Popover\r\n                    id={id}\r\n                    open={open}\r\n                    anchorEl={anchorEle}\r\n                    onClose={handleClose}\r\n                    anchorOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                >\r\n                    <Alert className={classes.alert} severity=\"warning\">\r\n                        Tag Already Exists!\r\n                    </Alert>\r\n                </Popover>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const ADDNOTE_Mutation = gql`\r\n    mutation createNote(\r\n        $email: String!\r\n        $title: String!\r\n        $markdown: String!\r\n        $tags: [String]!\r\n        $links: [String]!\r\n    ) {\r\n        createNote(\r\n            data: {\r\n                email: $email\r\n                title: $title\r\n                markdown: $markdown\r\n                tags: $tags\r\n                links: $links\r\n            }\r\n        ) {\r\n            id\r\n            tags\r\n            title\r\n            markdown\r\n            links\r\n        }\r\n    }\r\n`;\r\n","import { gql } from \"apollo-boost\";\r\n\r\nexport const DELNOTE_Mutation = gql`\r\n    mutation deleteNote($id: String!, $email: String!) {\r\n        deleteNote(id: $id, email: $email)\r\n    }\r\n`;\r\n","import { useReducer, useContext } from \"react\";\r\nimport { ADDNOTE_Mutation } from \"../../graphql/createNote\";\r\nimport { DELNOTE_Mutation } from \"../../graphql/deleteNote\";\r\nimport { UPDNOTE_Mutation } from \"../../graphql/updateNote\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nfunction actionReducer(state, action) {\r\n    let updOpenFiles = [];\r\n    let updCurrentOpenFile = \"\";\r\n\r\n    switch (action.type) {\r\n        case \"SET\":\r\n            return action.updData;\r\n        case \"NEW\":\r\n            return {\r\n                usernotes: [...state.usernotes, action.data],\r\n                openFiles: [...state.openFiles, action.id],\r\n                currentOpenFile: action.id,\r\n            };\r\n        case \"OPEN\":\r\n            if (action.id === \"root\") {\r\n                return state;\r\n            }\r\n            if (!state.openFiles.includes(action.id)) {\r\n                return {\r\n                    ...state,\r\n                    openFiles: [...state.openFiles, action.id],\r\n                    currentOpenFile: action.id,\r\n                };\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    currentOpenFile: action.id,\r\n                };\r\n            }\r\n        case \"RENAME\":\r\n            return {\r\n                ...state,\r\n                usernotes: action.data,\r\n            };\r\n        case \"DELETE\":\r\n            updCurrentOpenFile = state.currentOpenFile;\r\n            updOpenFiles = state.openFiles.filter((e) => e !== action.id);\r\n            if (action.id === state.currentOpenFile) {\r\n                let idx = state.openFiles.indexOf(state.currentOpenFile);\r\n                if (idx > 0) {\r\n                    updCurrentOpenFile = state.openFiles[idx - 1];\r\n                } else if (idx === 0 && state.openFiles.length > 1) {\r\n                    updCurrentOpenFile = state.openFiles[1];\r\n                } else {\r\n                    updCurrentOpenFile = \"\";\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                usernotes: action.data,\r\n                openFiles: updOpenFiles,\r\n                currentOpenFile: updCurrentOpenFile,\r\n            };\r\n        case \"CLOSE\":\r\n            updCurrentOpenFile = state.currentOpenFile;\r\n            updOpenFiles = state.openFiles.filter((e) => e !== action.id);\r\n            if (action.id === state.currentOpenFile) {\r\n                let idx = state.openFiles.indexOf(state.currentOpenFile);\r\n                if (idx > 0) {\r\n                    updCurrentOpenFile = state.openFiles[idx - 1];\r\n                } else if (idx === 0 && state.openFiles.length > 1) {\r\n                    updCurrentOpenFile = state.openFiles[1];\r\n                } else {\r\n                    updCurrentOpenFile = \"\";\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                openFiles: updOpenFiles,\r\n                currentOpenFile: updCurrentOpenFile,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction FileActions(initialState) {\r\n    const [state, dispatch] = useReducer(actionReducer, initialState);\r\n    const [newNote] = useMutation(ADDNOTE_Mutation);\r\n    const [delNote] = useMutation(DELNOTE_Mutation);\r\n    const [updNote] = useMutation(UPDNOTE_Mutation);\r\n    const {\r\n        user: { email },\r\n    } = useContext(AuthContext);\r\n\r\n    function setUserNotes(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                usernotes: data,\r\n            },\r\n        });\r\n    }\r\n    function setOpenFiles(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                openFiles: data,\r\n            },\r\n        });\r\n    }\r\n    function setCurrentOpenFile(data) {\r\n        dispatch({\r\n            type: \"SET\",\r\n            updData: {\r\n                ...state,\r\n                currentOpenFile: data,\r\n            },\r\n        });\r\n    }\r\n    async function newFile(title) {\r\n        try {\r\n            const a = await newNote({\r\n                variables: {\r\n                    email,\r\n                    title,\r\n                    markdown: \"\",\r\n                    tags: [],\r\n                    links: [],\r\n                },\r\n            });\r\n            dispatch({\r\n                type: \"NEW\",\r\n                id: a.data.createNote.id,\r\n                data: a.data.createNote,\r\n            });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n    function openFile(id) {\r\n        dispatch({\r\n            type: \"OPEN\",\r\n            id: id,\r\n        });\r\n    }\r\n    function saveFile(id, data) {\r\n        let newNotes = [...state.usernotes];\r\n        let idx = newNotes.findIndex((e) => e.id === id);\r\n        newNotes[idx] = data;\r\n        setUserNotes(newNotes);\r\n    }\r\n    function closeFile(id) {\r\n        dispatch({\r\n            type: \"CLOSE\",\r\n            id: id,\r\n        });\r\n    }\r\n    async function renameFile(id, title) {\r\n        try {\r\n            let data = [...state.usernotes];\r\n            data.find((e) => e.id === id).title = title;\r\n            dispatch({\r\n                type: \"RENAME\",\r\n                id,\r\n                data,\r\n            });\r\n            await updNote({ variables: { id, email, title } });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n    async function deleteFile(id) {\r\n        // TODO: delete file in backend, return new usernotes data\r\n        try {\r\n            let data = [...state.usernotes];\r\n            let idx = data.findIndex((e) => e.id === id);\r\n            data.splice(idx, 1);\r\n            dispatch({\r\n                type: \"DELETE\",\r\n                id,\r\n                data,\r\n            });\r\n            await delNote({ variables: { id, email } });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return {\r\n        usernotes: state.usernotes,\r\n        openFiles: state.openFiles,\r\n        currentOpenFile: state.currentOpenFile,\r\n        setuserNotes: setUserNotes,\r\n        setopenFiles: setOpenFiles,\r\n        setcurrentOpenFile: setCurrentOpenFile,\r\n        actions: {\r\n            new: newFile,\r\n            open: openFile,\r\n            save: saveFile,\r\n            close: closeFile,\r\n            rename: renameFile,\r\n            delete: deleteFile,\r\n        },\r\n    };\r\n}\r\n\r\nexport { FileActions };\r\n","import React from \"react\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nconst Example = ({ type, color }) => (\r\n    <ReactLoading type={type} color={color} height={180} width={180} />\r\n);\r\n\r\nexport default Example;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport { filecontext } from \"../../context/filetree\";\r\nimport { AvatarContext } from \"../../context/avatarContext\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { NOTES_QUERY } from \"../../graphql/notes\";\r\nimport { AVATAR_QUERY } from \"../../graphql/getAvatar\";\r\nimport { GUIDE_QUERY } from \"../../graphql/noti\";\r\nimport { AuthContext } from \"../../routes/auth\";\r\n\r\nimport PersistentDrawerLeft from \"./LeftDrawer\";\r\nimport PersistentDrawerRight from \"./RightDrawer\";\r\nimport TagBar from \"./TagBar\";\r\n\r\nimport { FileActions } from \"./FileActions\";\r\nimport { mainContext } from \"../../context/mainContext\";\r\n\r\nimport Loading from \"../../routes/loading\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainGrid: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    pageContainer: {\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n}));\r\n\r\nexport default function Page_1_0() {\r\n    const classes = useStyles();\r\n    const {\r\n        user: { email, userId: id },\r\n    } = useContext(AuthContext);\r\n    const [mode, setMode] = useState(\"search\");\r\n    const [open, setOpen] = useState(false);\r\n    const [searchStr, setSearchStr] = useState(\"\");\r\n\r\n    const { loading, error, data } = useQuery(NOTES_QUERY, {\r\n        variables: { email },\r\n    });\r\n\r\n    const { loading: ava_loading, error: ava_error, data: ava_data } = useQuery(\r\n        AVATAR_QUERY,\r\n        {\r\n            variables: { id },\r\n        }\r\n    );\r\n    const [avatar, setAvatar] = useState(\"\");\r\n    useEffect(() => {\r\n        if (!ava_loading && !ava_error) {\r\n            setAvatar(ava_data.userAvatar);\r\n        }\r\n        return () => {};\r\n    }, [ava_loading]);\r\n\r\n    const {\r\n        loading: guide_loading,\r\n        error: guide_error,\r\n        data: guide_data,\r\n    } = useQuery(GUIDE_QUERY);\r\n    const [guide, setGuide] = useState(\"\");\r\n    useEffect(() => {\r\n        if (!guide_loading && !guide_error) {\r\n            setGuide(guide_data.user);\r\n        }\r\n        return () => {};\r\n    }, [guide_loading]);\r\n\r\n    const {\r\n        usernotes,\r\n        openFiles,\r\n        currentOpenFile,\r\n        setcurrentOpenFile,\r\n        setuserNotes,\r\n        setopenFiles,\r\n        actions,\r\n    } = FileActions({ usernotes: [], openFiles: [], currentOpenFile: \"\" });\r\n\r\n    useEffect(() => {\r\n        if (!loading && !error) {\r\n            setuserNotes(data.usernotes);\r\n        }\r\n    }, [loading, data, error]);\r\n\r\n    return loading || ava_loading || guide_loading ? (\r\n        <div\r\n            backgroundColor=\"blue\"\r\n            style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n            }}\r\n        >\r\n            <Loading type=\"spinningBubbles\" color=\"ffffff\" />\r\n        </div>\r\n    ) : (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <Container\r\n                maxWidth={false}\r\n                disableGutters={true}\r\n                className={classes.pageContainer}\r\n            >\r\n                <filecontext.Provider\r\n                    value={{\r\n                        usernotes,\r\n                        openFiles,\r\n                        currentOpenFile,\r\n                        setcurrentOpenFile,\r\n                        setuserNotes,\r\n                        setopenFiles,\r\n                        actions,\r\n                    }}\r\n                >\r\n                    <AvatarContext.Provider value={{ avatar, setAvatar }}>\r\n                        <Header />\r\n                    </AvatarContext.Provider>\r\n                    <mainContext.Provider\r\n                        value={{\r\n                            mode,\r\n                            setMode,\r\n                            open,\r\n                            setOpen,\r\n                            searchStr,\r\n                            setSearchStr,\r\n                            guide,\r\n                        }}\r\n                    >\r\n                        <main\r\n                            style={{\r\n                                display: \"flex\",\r\n                                flexGrow: 1,\r\n                                width: \"100vw\",\r\n                                alignItems: \"stretch\",\r\n                            }}\r\n                        >\r\n                            <PersistentDrawerLeft></PersistentDrawerLeft>\r\n                            <div\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    flex: \"1 1 0\",\r\n                                    minWidth: \"0px\",\r\n                                    overflowY: \"hidden\",\r\n                                }}\r\n                            >\r\n                                <div\r\n                                    style={{\r\n                                        display: \"flex\",\r\n                                        flexGrow: 1,\r\n                                        maxWidth: \"100%\",\r\n                                        minWidth: \"0px\",\r\n                                        flexDirection: \"column\",\r\n                                        alignItems: \"stretch\",\r\n                                    }}\r\n                                >\r\n                                    <Main></Main>\r\n                                    <TagBar></TagBar>\r\n                                </div>\r\n                            </div>\r\n                            <PersistentDrawerRight></PersistentDrawerRight>\r\n                        </main>\r\n                    </mainContext.Provider>\r\n                </filecontext.Provider>\r\n            </Container>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Switch } from \"react-router-dom\";\r\nimport SignIn from \"../components/SignIn\";\r\nimport SignUp from \"../components/SignUp\";\r\nimport AuthRoute from \"./authRoute\";\r\nimport ProtectRoute from \"./protectRoute\";\r\nimport Page_1_0 from \"../components/Page_1_0/Page_1_0\";\r\nfunction Routes() {\r\n    return (\r\n        <Switch>\r\n            <AuthRoute exact path=\"/\" component={SignIn} />\r\n            <AuthRoute exact path=\"/login\" component={SignIn} />\r\n            <AuthRoute exact path=\"/signup\" component={SignUp} />\r\n            <ProtectRoute exact path=\"/dashboard\" component={Page_1_0} />\r\n        </Switch>\r\n    );\r\n}\r\n\r\nexport default Routes;\r\n","import \"./App.css\";\r\nimport Routes from \"./routes/Routes\";\r\n\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { setAccessToken } from \"./accessToken\";\r\nimport { AuthContext } from \"./routes/auth\";\r\nimport decode from \"jwt-decode\";\r\nimport Loading from \"./routes/loading\";\r\n\r\nfunction App() {\r\n    const [loading, setLoading] = useState(true);\r\n    const context = useContext(AuthContext);\r\n    useEffect(() => {\r\n        fetch(\"/refresh_token\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        }).then(async (res) => {\r\n            const data = await res.json();\r\n            if (data.accessToken) {\r\n                setAccessToken(data.accessToken);\r\n                const { userId, name, email } = decode(data.accessToken);\r\n                if (!context.user)\r\n                    context.login({\r\n                        userId,\r\n                        name,\r\n                        email,\r\n                        accessToken: data.accessToken,\r\n                    });\r\n            } else console.log(\"no access Token, Please login\");\r\n            setLoading(false);\r\n        });\r\n    }, []);\r\n    return (\r\n        <div className=\"App\">\r\n            <Router>\r\n                {loading ? (\r\n                    <div\r\n                        backgroundColor=\"blue\"\r\n                        style={{\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            display: \"flex\",\r\n                            justifyContent: \"center\",\r\n                            alignItems: \"center\",\r\n                        }}\r\n                    >\r\n                        <Loading type=\"spinningBubbles\" color=\"ffffff\" />\r\n                    </div>\r\n                ) : (\r\n                    <Routes />\r\n                )}\r\n            </Router>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { ApolloClient, InMemoryCache } from \"apollo-boost\";\r\nimport { ApolloProvider } from \"@apollo/react-hooks\";\r\nimport { ApolloLink, Observable } from \"apollo-link\";\r\nimport { onError } from \"apollo-link-error\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\nimport { TokenRefreshLink } from \"apollo-link-token-refresh\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { AuthProvider } from \"./routes/auth\";\r\nimport { setAccessToken, getAccessToken } from \"./accessToken\";\r\n\r\n// Create an http link:\r\nconst httpLink = createUploadLink({\r\n    uri: \"/graphql\",\r\n    credentials: \"include\",\r\n});\r\n\r\nconst requestLink = new ApolloLink(\r\n    (operation, forward) =>\r\n        new Observable((observer) => {\r\n            let handle;\r\n            Promise.resolve(operation)\r\n                .then((operation) => {\r\n                    const accessToken = getAccessToken();\r\n                    if (accessToken) {\r\n                        operation.setContext({\r\n                            headers: {\r\n                                authorization: `bearer ${accessToken}`,\r\n                            },\r\n                        });\r\n                    }\r\n                })\r\n                .then(() => {\r\n                    handle = forward(operation).subscribe({\r\n                        next: observer.next.bind(observer),\r\n                        error: observer.error.bind(observer),\r\n                        complete: observer.complete.bind(observer),\r\n                    });\r\n                })\r\n                .catch(observer.error.bind(observer));\r\n\r\n            return () => {\r\n                if (handle) handle.unsubscribe();\r\n            };\r\n        })\r\n);\r\n\r\nconst RefreshLink = new TokenRefreshLink({\r\n    accessTokenField: \"accessToken\",\r\n    isTokenValidOrUndefined: () => {\r\n        const token = getAccessToken();\r\n        if (!token) {\r\n            return true;\r\n        }\r\n\r\n        try {\r\n            const { exp } = jwtDecode(token);\r\n            if (Date.now() >= exp * 1000) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        } catch {\r\n            return false;\r\n        }\r\n    },\r\n    fetchAccessToken: () => {\r\n        return fetch(\"/refresh_token\", {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        });\r\n    },\r\n    handleFetch: (accessToken) => {\r\n        setAccessToken(accessToken);\r\n    },\r\n    handleError: (err) => {\r\n        console.warn(\"Your refresh token is invalid. Try to relogin\");\r\n        console.error(err);\r\n    },\r\n});\r\n\r\nconst errorLink = onError(({ graphQLErrors, networkError, errorMessage }) => {\r\n    console.log(graphQLErrors);\r\n    console.log(networkError);\r\n});\r\n\r\nconst client = new ApolloClient({\r\n    link: ApolloLink.from([RefreshLink, errorLink, requestLink, httpLink]),\r\n    cache: new InMemoryCache().restore({}),\r\n});\r\n\r\nconst wrappedApp = (\r\n    <ApolloProvider client={client}>\r\n        <AuthProvider>\r\n            <App />\r\n        </AuthProvider>\r\n    </ApolloProvider>\r\n);\r\n\r\nReactDOM.render(wrappedApp, document.getElementById(\"root\"));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}